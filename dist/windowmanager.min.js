!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("windowmanager",[],t):"object"==typeof exports?exports.windowmanager=t():e.windowmanager=t()}(this,function(){return function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),o=n(r);i(9),"undefined"!=typeof global&&global&&(global.windowmanager=o.default),"undefined"!=typeof window&&window&&(window.windowmanager=o.default),t.default=o.default,e.exports=t.default},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(2),o=i(5),a=n(o),u=["window-create","window-close"],s=new r.EventHandler(u);s.version="0.11.0",s.runtime={name:void 0,version:void 0,isBrowser:!1,isElectron:!1,isOpenFin:!1,isDesktop:!1,isMobile:!1,isMain:!1},"undefined"!=typeof navigator&&(s.runtime.isMobile=function(e){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}(navigator.userAgent||navigator.vendor||window.opera),s.runtime.isDesktop=!s.isMobile),s.geometry=a.default,t.default=s,e.exports=t.default},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(){return"window"+d()+(new Date).getTime()}Object.defineProperty(t,"__esModule",{value:!0});var o=i(3),a=n(o),u=i(4),s=n(u),d=function(){for(var e=[],t=0;t<256;t+=1)e[t]=(t<16?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&i]+e[i>>8&255]+"-"+e[i>>16&15|64]+e[i>>24&255]+"-"+e[63&n|128]+e[n>>8&255]+"-"+e[n>>16&255]+e[n>>24&255]+e[255&r]+e[r>>8&255]+e[r>>16&255]+e[r>>24&255]}}();t.default={getUniqueWindowName:r,EventHandler:a.default,SyncCallback:s.default},e.exports=t.default},function(e,t){"use strict";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this._eventListeners={},this._eventPipes=[];var t=!0,i=!1,n=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;this._eventListeners[a]=[]}}catch(e){i=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(i)throw n}}}Object.defineProperty(t,"__esModule",{value:!0}),i.prototype.on=function(e,t){e=e.toLowerCase().split(" ");var i=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var u=o.value;if(void 0!==this._eventListeners[u]){if(!t||"function"!=typeof t.constructor)throw new Error("on requires argument 'eventListener' of type Function");this._eventListeners[u].indexOf(t)>=0||this._eventListeners[u].push(t)}}}catch(e){n=!0,r=e}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}},i.prototype.once=function(e,t){function i(){this.off(e,i),t.apply(this,arguments)}this.on(e,i)},i.prototype.off=function(e,t){e=e.toLowerCase().split(" ");var i=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var u=o.value;if(void 0===this._eventListeners[u])return;if(!t||"function"!=typeof t.constructor)throw new Error("off requires argument 'eventListener' of type Function");var s=this._eventListeners[u].indexOf(t);s>=0&&this._eventListeners[u].splice(s,1)}}catch(e){n=!0,r=e}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}},i.prototype.clearEvent=function(e){e=e.toLowerCase();var t=!0,i=!1,n=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;if(void 0===this._eventListeners[a])return;this._eventListeners[a]=[]}}catch(e){i=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(i)throw n}}},i.prototype.emit=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];if(e=e.toLowerCase(),void 0===this._eventListeners[e])return!1;var r=!0,o=!0,a=!1,u=void 0;try{for(var s,d=this._eventListeners[e][Symbol.iterator]();!(o=(s=d.next()).done);o=!0){var l=s.value;r=r&&l.apply(this,i)!==!1}}catch(e){a=!0,u=e}finally{try{!o&&d.return&&d.return()}finally{if(a)throw u}}var f=!0,h=!1,c=void 0;try{for(var w,v=this._eventPipes[Symbol.iterator]();!(f=(w=v.next()).done);f=!0){var y=w.value;r=r&&y.emit.apply(y,arguments)!==!1}}catch(e){h=!0,c=e}finally{try{!f&&v.return&&v.return()}finally{if(h)throw c}}return r},i.prototype.addPipe=function(e){if(!e||!e.emit)throw new Error("addPipe requires argument 'eventHandler' of type EventHandler");this._eventPipes.indexOf(e)>=0||this._eventPipes.push(e)},i.prototype.removePipe=function(e){if(!e||!e.emit)throw new Error("removePipe requires argument 'eventHandler' of type EventHandler");if(!(this._eventPipes.indexOf(e)>=0)){var t=this._eventPipes.indexOf(e);t>=0&&this._eventPipes.splice(t,1)}},t.default=i,e.exports=t.default},function(e,t){"use strict";function i(e){return this instanceof i?(this.callback=e,void(this.count=0)):new i(e)}Object.defineProperty(t,"__esModule",{value:!0}),i.prototype.ref=function(e){var t=this;return this.count+=1,function(){e&&e.apply(void 0,arguments),t._deref()}},i.prototype._deref=function(){this.count-=1,this.count<=0&&this.callback()},t.default=i,e.exports=t.default},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(6),o=n(r),a=i(7),u=n(a),s=i(8),d=n(s);t.default={BoundingBox:u.default,CollisionMesh:d.default,Position:o.default,Size:o.default,Vector:o.default},e.exports=t.default},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(7),u=n(a),s=i(8),d=n(s),l=function(){function e(t,i){r(this,e);var n=t;n&&n.constructor!==Number?(this.left=n.left,this.top=n.top):(this.left=t,this.top=i)}return o(e,[{key:"clone",value:function(){return new e(this)}},{key:"isNaN",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return isNaN(this.left)||isNaN(this.top)})},{key:"getVector",value:function(){return this}},{key:"getBoundingBox",value:function(){return new u.default(this.left,this.top,this.left,this.top)}},{key:"getCollisionMesh",value:function(){return new d.default(this.getBoundingBox())}},{key:"distanceSquared",value:function(e){var t=e.subtract(this);return t.left*t.left+t.top*t.top}},{key:"distance",value:function(e){return Math.sqrt(this.distanceSquared(e))}},{key:"set",value:function(e){if(!e)throw new Error("set requires argument 'other'");return e=e.getVector(),this.left=e.left,this.top=e.top,this}},{key:"moveTo",value:function(e,t){return e&&e.constructor===Number&&(this.left=e),t&&t.constructor===Number&&(this.top=t),this}},{key:"moveBy",value:function(e,t){return e&&e.constructor===Number&&(this.left=e),t&&t.constructor===Number&&(this.top=t),this}},{key:"setMin",value:function(e){if(!e)throw new Error("setMin requires argument 'other'");e=e.getVector(),(Math.abs(e.left)<Math.abs(this.left)||isNaN(this.left))&&(this.left=e.left),(Math.abs(e.top)<Math.abs(this.top)||isNaN(this.top))&&(this.top=e.top)}},{key:"setMax",value:function(e){if(!e)throw new Error("setMax requires argument 'other'");e=e.getVector(),(Math.abs(e.left)>Math.abs(this.left)||isNaN(this.left))&&(this.left=e.left),(Math.abs(e.top)>Math.abs(this.top)||isNaN(this.top))&&(this.top=e.top)}},{key:"add",value:function(e){if(!e)throw new Error("add requires argument 'other'");return e=e.getVector(),this.left+=e.left,this.top+=e.top,this}},{key:"subtract",value:function(e){if(!e)throw new Error("subtract requires argument 'other'");return e=e.getVector(),this.left-=e.left,this.top-=e.top,this}}]),e}();t.default=l,e.exports=t.default},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){for(var t=Math.abs(e),i=arguments.length,n=Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];var o=!0,a=!1,u=void 0;try{for(var s,d=n[Symbol.iterator]();!(o=(s=d.next()).done);o=!0){var l=s.value,f=Math.abs(l);f<t&&(e=l,t=f)}}catch(e){a=!0,u=e}finally{try{!o&&d.return&&d.return()}finally{if(a)throw u}}return{min:e,abs:t}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=i(6),s=n(u),d=i(8),l=n(d),f=function(){function e(t,i,n,o){r(this,e);var a=t;a&&a.constructor!==Number?(a.getBoundingBox&&(a=a.getBoundingBox()),this.left=a.left,this.top=a.top,this.right=a.right,this.bottom=a.bottom):(this.left=t,this.top=i,this.right=n,this.bottom=o)}return a(e,[{key:"clone",value:function(){return new e(this)}},{key:"isNaN",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return isNaN(this.left)||isNaN(this.top)||isNaN(this.right)||isNaN(this.bottom)})},{key:"getWidth",value:function(){return Math.abs(this.right-this.left)}},{key:"getHeight",value:function(){return Math.abs(this.bottom-this.top)}},{key:"getSize",value:function(){return new s.default(this.getWidth(),this.getHeight())}},{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"getPosition",value:function(){return new s.default(this.left,this.top)}},{key:"getBoundingBox",value:function(){return this}},{key:"getCollisionMesh",value:function(){return new l.default(this)}},{key:"getCenterPosition",value:function(){return new s.default(this.left+this.getWidth()/2,this.top+this.getHeight()/2)}},{key:"difference",value:function(t){if(!t)throw new Error("difference requires argument 'other'");return t=t.getBoundingBox(),new e(this.left-t.left,this.top-t.top,this.right-t.right,this.bottom-t.bottom)}},{key:"getCenteredOnPosition",value:function(e){if(!e)throw new Error("getCenteredOnPosition requires argument 'other'");return e=e.getBoundingBox(),e.getCenterPosition().subtract(this.getCenterPosition().subtract(this.getPosition()))}},{key:"getIntersection",value:function(t){if(!t)throw new Error("getIntersection requires argument 'other'");t=t.getBoundingBox();var i=Math.max(this.left,t.left),n=Math.max(this.top,t.top),r=Math.min(this.right,t.right),o=Math.min(this.bottom,t.bottom);return i===r&&n===o?new s.default(i,n):i<=r&&n<=o?new e(i,n,r,o):void 0}},{key:"getDistanceSquaredToPoint",value:function(e){e=e.getVector();var t=e.left<=this.left?this.left:e.left>=this.right?this.right:e.left,i=e.top<=this.top?this.top:e.top>=this.bottom?this.bottom:e.top,n=new s.default(t,i);return n.distanceSquared(e)}},{key:"getDistanceToPoint",value:function(e){return Math.sqrt(this.getDistanceSquaredToPoint(e))}},{key:"set",value:function(e){if(!e)throw new Error("set requires argument 'other'");return e=e.getBoundingBox(),this.left=e.left,this.top=e.top,this.right=e.right,this.bottom=e.bottom,this}},{key:"moveTo",value:function(e,t){return e&&e.constructor===Number&&(this.right=e+(this.right-this.left),this.left=e),t&&t.constructor===Number&&(this.bottom=t+(this.bottom-this.top),this.top=t),this}},{key:"moveBy",value:function(e,t){return e&&e.constructor===Number&&(this.left+=e,this.right+=e),t&&t.constructor===Number&&(this.top+=t,this.bottom+=t),this}},{key:"resizeTo",value:function(e,t,i){var n=this.getSize(),r=new s.default(e||n.left,t||n.top);if(i=i||"top-left","string"==typeof i||i instanceof String){var o=i;i=this.getPosition(),o.indexOf("right")>=0&&(i.left+=n.left),o.indexOf("bottom")>=0&&(i.top+=n.top)}return this.left+=(i.left-this.left)*(n.left-r.left)/n.left,this.right+=(i.left-this.right)*(n.left-r.left)/n.left,this.top+=(i.top-this.top)*(n.top-r.top)/n.top,this.bottom+=(i.top-this.bottom)*(n.top-r.top)/n.top,this}},{key:"isContains",value:function(e){if(!e)throw new Error("isContains requires argument 'other'");return e=e.getBoundingBox(),e.left>=this.left&&e.right<=this.right&&e.top>=this.top&&e.bottom<=this.bottom}},{key:"someContains",value:function(e){if(!e)throw new Error("someContains requires argument 'others'");if(e.constructor!==Array)throw new Error("someContains requires argument 'others' of type Array");for(var t=0;t<e.length;t+=1)if(this.isContains(e[t]))return!0;return!1}},{key:"isTouching",value:function(e){if(!e)throw new Error("isTouching requires argument 'other'");return e=e.getBoundingBox(),this.top<=e.bottom&&this.bottom>=e.top&&(this.left===e.right||this.right===e.left)||this.left<=e.right&&this.right>=e.left&&(this.top===e.bottom||this.bottom===e.top)}},{key:"getEdgeTouching",value:function(e){if(!e)throw new Error("getEdgeTouching requires argument 'others'");e.constructor!==Array&&(e=[e]);for(var t=0;t<e.length;t+=1){var i=e[t].getBoundingBox();if(this.top<=i.bottom&&this.bottom>=i.top){if(this.left===i.right)return"left";if(this.right===i.left)return"right"}if(this.left<=i.right&&this.right>=i.left){if(this.top===i.bottom)return"top";if(this.bottom===i.top)return"bottom"}}}},{key:"getOtherEdgeTouching",value:function(e){if(!e)throw new Error("getOtherEdgeTouching requires argument 'others'");e.constructor!==Array&&(e=[e]);for(var t=0;t<e.length;t+=1){var i=e[t].getBoundingBox();if(this.top<=i.bottom&&this.bottom>=i.top){if(this.left===i.right)return"right";if(this.right===i.left)return"left"}if(this.left<=i.right&&this.right>=i.left){if(this.top===i.bottom)return"bottom";if(this.bottom===i.top)return"top"}}}},{key:"getEdgeClosestOrder",value:function(e){if(!e)throw new Error("getEdgeClosest requires argument 'other'");e=e.getBoundingBox();var t=this.getCenterPosition(),i=[];return i.push({edge:"left",dis:e.getDistanceSquaredToPoint(this.left,t.top)}),i.push({edge:"top",dis:e.getDistanceSquaredToPoint(t.left,this.top)}),i.push({edge:"right",dis:e.getDistanceSquaredToPoint(this.right,t.top)}),i.push({edge:"bottom",dis:e.getDistanceSquaredToPoint(t.left,this.bottom)}),i.sort(function(e,t){return e.dis-t.dis}),i.map(function(e){return e.edge})}},{key:"getEdgeClosest",value:function(e){var t=this.getEdgeClosestOrder(e);return t[0]}},{key:"getSnapDelta",value:function(e,t){if(!e)throw new Error("getSnapDelta requires argument 'other'");e=e.getBoundingBox(),t=t||5;var i=new s.default(NaN,NaN);if(this.top<=e.bottom&&this.bottom>=e.top){var n=o(e.left-this.right,e.right-this.left);if(n.abs<=t){i.left=n.min;var r=o(e.top-this.top,e.bottom-this.bottom);r.abs<=t&&(i.top=r.min)}}else if(this.left<=e.right&&this.right>=e.left){var a=o(e.top-this.bottom,e.bottom-this.top);if(a.abs<=t){i.top=a.min;var u=o(e.left-this.left,e.right-this.right);u.abs<=t&&(i.left=u.min)}}return i}},{key:"someTouching",value:function(e){if(!e)throw new Error("someTouching requires argument 'others'");if(e.constructor!==Array)throw new Error("someTouching requires argument 'others' of type Array");for(var t=0;t<e.length;t+=1)if(this.isTouching(e[t]))return!0;return!1}},{key:"isColliding",value:function(e){if(!e)throw new Error("isColliding requires argument 'other'");return e=e.getBoundingBox(),this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top}},{key:"someColliding",value:function(e){if(!e)throw new Error("someColliding requires argument 'others'");if(e.constructor!==Array)throw new Error("someColliding requires argument 'others' of type Array");for(var t=0;t<e.length;t+=1)if(this.isColliding(e[t]))return!0;return!1}},{key:"getColliding",value:function(e){if(!e)throw new Error("getColliding requires argument 'others'");if(e.constructor!==Array)throw new Error("getColliding requires argument 'others' of type Array");for(var t=0;t<e.length;t+=1)if(this.isColliding(e[t]))return e[t]}}]),e}();t.default=f,e.exports=t.default},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(6),u=n(a),s=i(7),d=n(s),l=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r(this,e),!t)throw new Error("CollisionMesh constructor requires argument 'boxes'");t.constructor!==Array&&(t=[t]),this.boxes=[];var n=!0,o=!1,a=void 0;try{for(var u,s=t[Symbol.iterator]();!(n=(u=s.next()).done);n=!0){var l=u.value;l.constructor===d.default?this.boxes.push(l):l.constructor===e?this.boxes=this.boxes.concat(l.boxes):this.boxes=this.boxes.concat(l.getCollisionMesh(i).boxes)}}catch(e){o=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}}return o(e,[{key:"clone",value:function(){for(var t=new Array(this.boxes.length),i=0;i<this.boxes.length;i+=1)t[i]=this.boxes[i].clone();return new e(t)}},{key:"getWidth",value:function(){if(0===this.boxes.length)return 0;for(var e=this.boxes[0].left,t=this.boxes[0].right,i=1;i<this.boxes.length;i+=1)e=Math.min(e,this.boxes[i].left),t=Math.max(t,this.boxes[i].right);return t-e}},{key:"getHeight",value:function(){if(0===this.boxes.length)return 0;for(var e=this.boxes[0].top,t=this.boxes[0].bottom,i=1;i<this.boxes.length;i+=1)e=Math.min(e,this.boxes[i].top),t=Math.max(t,this.boxes[i].bottom);return t-e}},{key:"getSize",value:function(){return this.getBoundingBox().getSize()}},{key:"getPosition",value:function(){return this.getBoundingBox().getPosition()}},{key:"getBoundingBox",value:function(){if(0===this.boxes.length)return new d.default(NaN,NaN,NaN,NaN);for(var e=this.boxes[0].clone(),t=1;t<this.boxes.length;t+=1)e.left=Math.min(e.left,this.boxes[t].left),e.top=Math.min(e.top,this.boxes[t].top),e.right=Math.max(e.right,this.boxes[t].right),e.bottom=Math.max(e.bottom,this.boxes[t].bottom);return e}},{key:"getCollisionMesh",value:function(){return this}},{key:"moveTo",value:function(e,t){var i=new u.default(e,t);return this.moveBy(i.subtract(this.getPosition())),this}},{key:"moveBy",value:function(e,t){var i=new u.default(e||0,t||0),n=!0,r=!1,o=void 0;try{for(var a,s=this.boxes[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var d=a.value;d.moveBy(i)}}catch(e){r=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return this}},{key:"isContains",value:function(t){if(!t)throw new Error("isContains requires argument 'other'");t=t.constructor===Array?new e(t):t.getCollisionMesh();var i=!0,n=!1,r=void 0;try{for(var o,a=t.boxes[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var u=o.value,s=!1,d=!0,l=!1,f=void 0;try{for(var h,c=this.boxes[Symbol.iterator]();!(d=(h=c.next()).done);d=!0){var w=h.value;s|=w.isContains(u)}}catch(e){l=!0,f=e}finally{try{!d&&c.return&&c.return()}finally{if(l)throw f}}if(!s)return!1}}catch(e){n=!0,r=e}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}return!0}},{key:"someContains",value:function(t){if(!t)throw new Error("someContains requires argument 'other'");t=t.constructor===Array?new e(t):t.getCollisionMesh();var i=!0,n=!1,r=void 0;try{for(var o,a=this.boxes[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var u=o.value;if(u.someContains(t.boxes))return!0}}catch(e){n=!0,r=e}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}return!1}},{key:"isTouching",value:function(t){if(!t)throw new Error("isTouching requires argument 'other'");t=t.constructor===Array?new e(t):t.getCollisionMesh();var i=!0,n=!1,r=void 0;try{for(var o,a=this.boxes[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var u=o.value;if(u.someTouching(t.boxes))return!0}}catch(e){n=!0,r=e}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}return!1}},{key:"someTouching",value:function(e){if(!e)throw new Error("someTouching requires argument 'others'");if(e.constructor!==Array)throw new Error("someTouching requires argument 'others' to resolve to type Array");var t=!0,i=!1,n=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;if(this.isTouching(a))return!0}}catch(e){i=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(i)throw n}}return!1}},{key:"isColliding",value:function(t){if(!t)throw new Error("isColliding requires argument 'other'");t=t.constructor===Array?new e(t):t.getCollisionMesh();var i=!0,n=!1,r=void 0;try{for(var o,a=this.boxes[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var u=o.value;if(u.someColliding(t.boxes))return!0}}catch(e){n=!0,r=e}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}return!1}},{key:"someColliding",value:function(e){if(!e)throw new Error("someColliding requires argument 'others'");if(e.constructor!==Array)throw new Error("someColliding requires argument 'others' to resolve to type Array");var t=!0,i=!1,n=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value,u=!0,s=!1,d=void 0;try{for(var l,f=this.boxes[Symbol.iterator]();!(u=(l=f.next()).done);u=!0){var h=l.value;if(h.isColliding(a))return!0}}catch(e){s=!0,d=e}finally{try{!u&&f.return&&f.return()}finally{if(s)throw d}}}}catch(e){i=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(i)throw n}}return!1}},{key:"getColliding",value:function(t){if(!t)throw new Error("getColliding requires argument 'other'");t=t.constructor===Array?new e(t):t.getCollisionMesh();var i=!0,n=!1,r=void 0;try{for(var o,a=this.boxes[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var u=o.value,s=u.getColliding(t.boxes);if(s)return s}}catch(e){n=!0,r=e}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}}}]),e}();t.default=l,e.exports=t.default},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i(10);var n=void 0;n=i("undefined"!=typeof process&&process&&process.versions&&process.versions.electron||"undefined"!=typeof window&&window&&window.nodeRequire&&window.nodeRequire.runtime?11:"undefined"!=typeof fin&&fin&&fin.desktop&&fin.desktop.main?18:21),t.default=n,e.exports=t.default},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),o=n(r),a=i(2),u=[],s=!1;o.default.onReady=function(e){if(!(e&&e.constructor&&e.call&&e.apply))throw new Error("onReady expects a function passed as the callback argument!");s&&e(),u.indexOf(e)>=0||u.push(e)},o.default.isReady=function(){return s},t.default=new a.SyncCallback(function(){s=!0;var e=!0,t=!1,i=void 0;try{for(var n,r=u[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var o=n.value;o()}}catch(e){t=!0,i=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw i}}u=[]}),e.exports=t.default},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=i(12),o=n(r);o.default._isNode?i(14):o.default._isRenderer&&i(16)},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),o=n(r),a=i(13),u=n(a);if(o.default._isNode=!1,o.default._isStartup=!1,o.default._isRenderer=!1,o.default.runtime.name="Electron",o.default.runtime.version=void 0,o.default.runtime.isElectron=!0,"undefined"!=typeof global&&global){var s=(0,u.default)("electron"),d=s.BrowserWindow;o.default._isNode=null!=d,o.default._isStartup=!o.default._isNode,o.default.runtime.version=global.process.versions.electron,o.default._isStartup&&!function(){var e=u.default;e.runtime=o.default.runtime,e.workingDir=e("path").dirname(e.main.filename),e.windowmanagerPath=__filename,global.nodeRequire=e,process.once("loaded",function(){global.nodeRequire=e})}()}else"undefined"!=typeof window&&window&&(o.default._isRenderer=!0,null!=window.nodeRequire&&(o.default.runtime=window.nodeRequire.runtime,o.default._windows=new Map));t.default=o.default,e.exports=t.default},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=eval("typeof require !== 'undefined' && require"),module.exports=exports.default},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=i(10),o=n(r);i(15),o.default._deref()},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=i(12),o=n(r),a=i(13),u=n(a),s=(0,u.default)("electron"),d=s.BrowserWindow,l=o.default.geometry,f=l.Vector,h=l.BoundingBox;d.prototype._notifyReady=function(){var e=!0,t=!1,i=void 0;try{for(var n,r=d.getAllWindows()[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var o=n.value;o.webContents.send("window-create",this.id)}}catch(e){t=!0,i=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw i}}},d.prototype._ensureDockSystem=function(){var e=this;void 0===this._dockedGroup&&!function(){e._dockedGroup=[e],e.on("closed",function(){this.undock()}),e.on("maximize",function(){this.undock()}),e.on("minimize",function(){this._dockMinimize()}),e.on("restore",function(){var e=!0,t=!1,i=void 0;try{for(var n,r=this._dockedGroup[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var o=n.value;o!==this&&o.restore()}}catch(e){t=!0,i=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw i}}});var t=e.getBounds();e.on("move",function(){var e=this.getBounds();t=e}),e.on("resize",function(){var e=this.getBounds();e.width===t.width&&e.height===t.height||this.undock(),t=e})}()},d.prototype.dock=function(e){this._ensureDockSystem();var t=d.fromId(e);if(void 0!==t&&!(this._dockedGroup.indexOf(t)>=0)){t._ensureDockSystem();var i=!0,n=!1,r=void 0;try{for(var o,a=t._dockedGroup[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var u=o.value;this._dockedGroup.push(u),u._dockedGroup=this._dockedGroup}}catch(e){n=!0,r=e}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}}},d.prototype.undock=function(){this._ensureDockSystem(),1!==this._dockedGroup.length&&(this._dockedGroup.splice(this._dockedGroup.indexOf(this),1),this._dockedGroup=[this])},d.prototype._dockFocus=function(){this._ensureDockSystem();var e=!0,t=!1,i=void 0;try{for(var n,r=this._dockedGroup[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var o=n.value;o!==this&&(o.setAlwaysOnTop(!0),o.setAlwaysOnTop(!1))}}catch(e){t=!0,i=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw i}}this.setAlwaysOnTop(!0),this.setAlwaysOnTop(!1)},d.prototype._dragStart=function(){this._ensureDockSystem(),this.restore();var e=!0,t=!1,i=void 0;try{for(var n,r=this._dockedGroup[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var o=n.value;o._dragStartPos=o.getPosition()}}catch(e){t=!0,i=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw i}}},d.prototype._getBounds=function(){var e=this.getBounds();return new h(e.x,e.y,e.x+e.width,e.y+e.height)},d.prototype._dragBy=function(e,t){this._ensureDockSystem();var i=this._getBounds().moveTo(this._dragStartPos[0]+e,this._dragStartPos[1]+t),n=new f(NaN,NaN),r=!0,o=!1,a=void 0;try{for(var u,s=d.getAllWindows()[Symbol.iterator]();!(r=(u=s.next()).done);r=!0){var l=u.value;l._dockedGroup!==this._dockedGroup&&n.setMin(i.getSnapDelta(l._getBounds()))}}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}e+=n.left||0,t+=n.top||0;var h=!0,c=!1,w=void 0;try{for(var v,y=this._dockedGroup[Symbol.iterator]();!(h=(v=y.next()).done);h=!0){var p=v.value,_=p._dragStartPos;void 0===_&&(_=p._dragStartPos=p.getPosition(),_[0]-=e,_[1]-=t),p.setPosition(_[0]+e,_[1]+t)}}catch(e){c=!0,w=e}finally{try{!h&&y.return&&y.return()}finally{if(c)throw w}}},d.prototype._dragStop=function(){this._ensureDockSystem();var e=this._getBounds(),t=!0,i=!1,n=void 0;try{for(var r,o=d.getAllWindows()[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;e.isTouching(a._getBounds())&&this.dock(a.id)}}catch(e){i=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(i)throw n}}var u=!0,s=!1,l=void 0;try{for(var f,h=this._dockedGroup[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var c=f.value;delete c._dragStartPos}}catch(e){s=!0,l=e}finally{try{!u&&h.return&&h.return()}finally{if(s)throw l}}},d.prototype._dockMoveTo=function(e,t){this._ensureDockSystem();var i=this.getPosition(),n=e-i[0],r=t-i[1],o=!0,a=!1,u=void 0;try{for(var s,d=this._dockedGroup[Symbol.iterator]();!(o=(s=d.next()).done);o=!0){var l=s.value,f=l.getPosition();l.setPosition(f[0]+n,f[1]+r)}}catch(e){a=!0,u=e}finally{try{!o&&d.return&&d.return()}finally{if(a)throw u}}},d.prototype._dockMinimize=function(e,t){this._ensureDockSystem();var i=!0,n=!1,r=void 0;try{for(var o,a=this._dockedGroup[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var u=o.value;u.minimize()}}catch(e){n=!0,r=e}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}},d.prototype._dockHide=function(e,t){this._ensureDockSystem();var i=!0,n=!1,r=void 0;try{for(var o,a=this._dockedGroup[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var u=o.value;u.hide()}}catch(e){n=!0,r=e}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}},d.prototype._dockShow=function(e,t){this._ensureDockSystem();var i=!0,n=!1,r=void 0;try{for(var o,a=this._dockedGroup[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var u=o.value;u.show()}}catch(e){n=!0,r=e}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=i(12),o=n(r),a=i(10),u=n(a),s=i(17),d=n(s),l=window.nodeRequire("electron"),f=l.ipcRenderer;o.default.messagebus=function(){function e(e,t){return function(i,n){if(!e||e._id===n.winID){var r=o.default.Window.getByID(n.winID);r._id!==o.default.Window.current._id&&t.apply(r,n.args)}}}var t={},i={};return{send:function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];
var r=o.default.Window.current,a={id:0,winID:r._id,event:e,args:i};if(i.length>0&&i[0]instanceof d.default){var u=i.shift();if(u._id===r._id)return;u._window.webContents.send(e,a)}else{var s=!0,l=!1,f=void 0;try{for(var h,c=o.default.Window.getAll()[Symbol.iterator]();!(s=(h=c.next()).done);s=!0){var w=h.value;w!==r&&w._window.webContents.send(e,a)}}catch(e){l=!0,f=e}finally{try{!s&&c.return&&c.return()}finally{if(l)throw f}}}},on:function(n,r,a){void 0===a&&(a=r,r=void 0);var u=e(r,a);if(void 0!==r){if(r._id===o.default.Window.current._id)return;var s=i[r._id]=i[r._id]||{};s[n]=s[n]||new Map,s[n].set(a,u)}else t[n]=t[n]||new Map,t[n].set(a,u);f.on(n,u)},off:function(e,n,r){if(void 0===r&&(r=n,n=void 0),void 0!==n){var o=i[n._id]=i[n._id]||{};o[e]=o[e]||new Map,f.removeListener(e,o[e].delete(r))}else t[e]=t[e]||new Set,f.removeListener(e,t[e].get(r))}}}(),u.default._deref()},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t=l.default._windows.get(e);if(t)return t;var i=p.fromId(e);return null!==i?new k(i):void 0}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),d=i(12),l=n(d),f=i(2),h=i(5),c=window.nodeRequire("electron"),w=c.ipcRenderer,v=c.remote,y=window.nodeRequire("url"),p=v.BrowserWindow,_=v.getCurrentWindow(),m={width:600,height:600,frame:!1,resizable:!0,hasShadow:!1,icon:"favicon.ico",webPreferences:{nodeIntegration:!1,preload:window.nodeRequire.windowmanagerPath}},g={left:"x",top:"y"},b=["ready","drag-start","drag-before","drag-stop","dock-before","move","move-before","resize-before","close","minimize"],k=function(e){function t(e){function i(){w.emit("move")}function n(){w.emit("minimize")}function a(){window.removeEventListener("beforeunload",u),l.default._windows.delete(w._id),w._isClosed=!0,w.emit("close"),w._window=void 0}function u(){l.default._windows.delete(w._id),w._window.removeListener("move",i),w._window.removeListener("close",a),w._window.removeListener("minimize",n)}r(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,b));e=e||{};var d=void 0===e.webContents;if(d){for(var f in e)e.hasOwnProperty(f)&&void 0!==g[f]&&(e[g[f]]=e[f],delete e[f]);for(var h in m)m.hasOwnProperty(h)&&(e[h]=e[h]||m[h]);var c=e.url;delete e.url,s._window=new p(e),s._id=s._window.id,e.title=null==e.title?s._id:e.title,/^(file|http)/i.test(c)||("/"!==c[0]?c=y.resolve(location.href,c):/^http/i.test(location.href)?c=location.origin+c:/^file/i.test(location.href)&&(c=v.getGlobal("workingDir")+c)),s._window.loadURL(c),s._window.setTitle(e.title)}else s._window=e,s._id=s._window.id;l.default._windows.set(s._id,s),s._window._ensureDockSystem();var w=s;return s._window.on("move",i),s._window.on("minimize",n),window.addEventListener("beforeunload",u),s._window!==_&&s._window.on("close",a),s._isClosed=!1,s._ready=!0,d&&s._window._notifyReady(),s}return a(t,e),s(t,[{key:"isReady",value:function(){return void 0!==this._window&&!this._isClosed()}},{key:"onReady",value:function(e){if(this.isClosed())throw new Error("onReady can't be called on a closed window");return this.isReady()?e.call(this):void this.once("ready",e)}},{key:"isClosed",value:function(){return this._isClosed}},{key:"getPosition",value:function(){var e=this._window.getPosition();return new h.Position(e[0],e[1])}},{key:"getWidth",value:function(){var e=this._window.getSize();return e[0]}},{key:"getHeight",value:function(){var e=this._window.getSize();return e[1]}},{key:"getSize",value:function(){var e=this._window.getSize();return new h.Position(e[0],e[1])}},{key:"getBounds",value:function(){var e=this._window.getBounds();return new h.BoundingBox(e.x,e.y,e.x+e.width,e.y+e.height)}},{key:"getTitle",value:function(){return this._window.getTitle()}},{key:"setTitle",value:function(e){if(!e)throw new Error("setTitle requires one argument of type String");this._window.setTitle(e)}},{key:"isHidden",value:function(){return!this.isShown()}},{key:"isShown",value:function(){return this._window.isVisible()}},{key:"isMinimized",value:function(){return this._window.isMinimized()}},{key:"isMaximized",value:function(){return this._window.isMaximized()}},{key:"isRestored",value:function(){return this.isShown()&&!this.isMinimized()&&!this.isMaximized()}},{key:"close",value:function(e){return this.isClosed()?e&&e():(this._window.close(),void(e&&e()))}},{key:"minimize",value:function(e){if(!this._ready)throw new Error("minimize can't be called on an unready window");this._window._dockMinimize(),e&&e()}},{key:"maximize",value:function(e){if(!this._ready)throw new Error("maximize can't be called on an unready window");this._window.maximize(),e&&e()}},{key:"show",value:function(e){if(!this._ready)throw new Error("show can't be called on an unready window");this._window._dockShow(),e&&e()}},{key:"hide",value:function(e){if(!this._ready)throw new Error("hide can't be called on an unready window");this._window._dockHide(),e&&e()}},{key:"restore",value:function(e){if(!this._ready)throw new Error("restore can't be called on an unready window");this._window.restore(),e&&e()}},{key:"bringToFront",value:function(e){if(!this._ready)throw new Error("bringToFront can't be called on an unready window");this._window.setAlwaysOnTop(!0),this._window.setAlwaysOnTop(!1),e&&e()}},{key:"focus",value:function(e){if(!this._ready)throw new Error("focus can't be called on an unready window");this._window.focus(),e&&e()}},{key:"resizeTo",value:function(e,t,i){if(!this._ready)throw new Error("resizeTo can't be called on an unready window");var n=new h.Position(e,t);this._window.setSize(n.left,n.top),i&&i()}},{key:"moveTo",value:function(e,t,i){if(!this._ready)throw new Error("moveTo can't be called on an unready window");var n=new h.Position(e,t);this._window._dockMoveTo(n.left,n.top),i&&i()}},{key:"moveBy",value:function(e,t,i){if(!this._ready)throw new Error("moveBy can't be called on an unready window");var n=this.getBounds(),r=new h.Position(e,t);this._window._dockMoveTo(n.left+r.left,n.top+r.top),i&&i()}},{key:"setSize",value:function(e,t,i){if(!this._ready)throw new Error("setSize can't be called on an unready window");var n=new h.Size(e,t);this._window.setSize(n.left,n.top),i&&i()}},{key:"setBounds",value:function(e,t,i,n,r){if(!this._ready)throw new Error("resizeTo can't be called on an unready window");var o=new h.BoundingBox(e,t,i,n);this._window.setBounds({x:o.left,y:o.top,width:o.getWidth(),height:o.getHeight()}),r&&r()}},{key:"dock",value:function(e){this._window.dock(e._window.id)}},{key:"undock",value:function(){this._window.undock()}}],[{key:"getAll",value:function(){return Array.from(l.default._windows.values())}},{key:"getByID",value:function(e){return l.default._windows.get(e)}},{key:"getCurrent",value:function(){return t.current}}]),t}(f.EventHandler);k.current=new k(_),function(){var e=0,t=0,i=!1;window.addEventListener("focus",function(){k.current._window._dockFocus()}),window.addEventListener("mousedown",function(n){n.target.classList&&n.target.classList.contains("window-drag")&&(i=!0,e=n.screenX,t=n.screenY,k.current._window._dragStart())}),window.addEventListener("mousemove",function(n){i&&k.current._window._dragBy(n.screenX-e,n.screenY-t)}),window.addEventListener("mouseup",function(){i=!1,k.current._window._dragStop()});var n=v.Menu,r=v.MenuItem,o=null,a=new n;a.append(new r({label:"Reload",accelerator:"CmdOrCtrl+R",click:function(){k.current._window.reload()}})),a.append(new r({label:"Reload app and restart children",click:function(){var e=!0,t=!1,i=void 0;try{for(var n,r=l.default._windows.values()[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var o=n.value;o.close()}}catch(e){t=!0,i=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw i}}v.app.relaunch(),v.app.exit(0)}})),a.append(new r({type:"separator"})),a.append(new r({label:"Inspect Element",accelerator:"CmdOrCtrl+Shift+I",click:function(){k.current._window.inspectElement(o.x,o.y)}})),window.addEventListener("contextmenu",function(e){e.preventDefault(),o={x:e.x,y:e.y},a.popup(k.current._window)},!1)}();var x=!0,S=!1,M=void 0;try{for(var z,B=p.getAllWindows()[Symbol.iterator]();!(x=(z=B.next()).done);x=!0){var E=z.value;u(E.id)}}catch(e){S=!0,M=e}finally{try{!x&&B.return&&B.return()}finally{if(S)throw M}}w.on("window-create",function(e,t){l.default.emit("window-create",u(t))}),l.default.Window=k,t.default=k,e.exports=t.default},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=i(19),o=n(r),a=i(20),u=n(a),s="app_uuid";o.default.messagebus=function(){function e(e){return function(t){var i=u.default.getByID(t.winID);i._id!==u.default.current._id&&e.apply(i,t.args)}}var t={},i={};return{send:function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];var r=u.default.current,o={id:0,winID:r._id,event:e,args:i};if(i.length>0&&i[0]instanceof u.default){var a=i.shift();if(a._id===r._id)return;fin.desktop.InterApplicationBus.send(u.default.current._window[s],a._id,e,o)}else fin.desktop.InterApplicationBus.send(u.default.current._window[s],e,o)},on:function(n,r,o){void 0===o&&(o=r,r=void 0);var a=e(o);if(void 0!==r){if(r._id===u.default.current._id)return;var d=i[r._id]=i[r._id]||{};d[n]=d[n]||new Map,d[n].set(o,a),fin.desktop.InterApplicationBus.subscribe(u.default.current._window[s],r._id,n,a)}else t[n]=t[n]||new Map,t[n].set(o,a),fin.desktop.InterApplicationBus.subscribe(u.default.current._window[s],n,a)},off:function(e,n,r){if(void 0===r&&(r=n,n=void 0),void 0!==n){var o=i[n._id]=i[n._id]||{};o[e]=o[e]||new Map,fin.desktop.InterApplicationBus.unsubscribe(u.default.current._window[s],n._window._id,e,o[e].delete(r))}else t[e]=t[e]||new Set,fin.desktop.InterApplicationBus.unsubscribe(u.default.current._window[s],e,t[e].delete(r))}}}()},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),o=n(r),a=i(10),u=n(a),s=i(2);o.default.runtime.name="OpenFin",o.default.runtime.version=void 0,o.default.runtime.isOpenFin=!0;var d=u.default.ref(function(e){o.default.runtime.version=e});fin.desktop.main(u.default.ref(function(){fin.desktop.System.getVersion(d);var e=fin.desktop.Application.getCurrent(),t=e.getWindow().contentWindow;t===window&&(o.default.runtime.isMain=!0,o.default._internalBus=new s.EventHandler(Object.keys(o.default._eventListeners)),o.default._windows=new Map),o.default._internalBus.addPipe(o.default)})),t.default=o.default,e.exports=t.default},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(){function e(){r._window.contentWindow.windowmanager?(r._window.contentWindow.windowmanager._windows=f.default._windows,r._window.contentWindow.windowmanager._internalBus=f.default._internalBus):setTimeout(e,5)}function t(e){e.right=e.left+e.width,e.bottom=e.top+e.height,r._bounds.set(new v.BoundingBox(e)),0!==e.changeType&&r.undock(),1!==e.changeType&&r.emit("move")}function i(){r._isClosed=!0,f.default._windows.delete(r._id),r.undock();var e=r.getParent(),t=!0,i=!1,n=void 0;try{for(var o,a=r.getChildren()[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var u=o.value;u.setParent(e)}}catch(e){i=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(i)throw n}}r.setParent(void 0),r.emit("close"),f.default._internalBus.emit("window-close",r),r._window=void 0}function n(){r.emit("minimize")}var r=this;e(),this._window.getBounds(function(e){e.right=e.left+e.width,e.bottom=e.top+e.height,r._bounds.set(new v.BoundingBox(e))}),this._window.addEventListener("bounds-changing",t),this._window.addEventListener("bounds-changed",t),this._window.addEventListener("closed",i),this._window.addEventListener("minimized",n),this._titleEl=this._window.contentWindow.document.createElement("title"),this._titleEl.innerText=this._title,this._window.contentWindow.document.head.appendChild(this._titleEl),this._ready=!0,this.emit("ready"),f.default._internalBus.emit("window-create",this)}function s(){g.current=f.default._windows.get(m.name)||new g(m);var e=0,t=0,i=!1;window.addEventListener("mousedown",function(n){n.target.classList&&n.target.classList.contains("window-drag")&&(i=!0,e=n.screenX,t=n.screenY,g.current._dragStart())}),window.addEventListener("mousemove",function(n){i&&g.current._dragBy(n.screenX-e,n.screenY-t)}),window.addEventListener("mouseup",function(){i=!1,g.current._dragStop()})}Object.defineProperty(t,"__esModule",{value:!0});var d=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(19),f=n(l),h=i(10),c=n(h),w=i(2),v=i(5),y={defaultWidth:600,defaultHeight:600,frame:!1,resizable:!0,saveWindowState:!1,autoShow:!0,icon:location.href+"favicon.ico"},p={title:"name",left:"defaultLeft",top:"defaultTop",width:"defaultWidth",height:"defaultHeight"},_=["ready","drag-start","drag-before","drag-stop","dock-before","move","move-before","resize-before","close","minimize"],m=void 0,g=function(e){function t(e){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,_));e=e||{};var n=void 0===e.app_uuid;if(i._bounds=new v.BoundingBox,i._ready=!1,i._isClosed=!1,i._isHidden=!1,i._isMinimized=!1,i._isMaximized=!1,i._dockedGroup=[i],i._children=[],i._parent=void 0,i._title=void 0,n){for(var a in e)e.hasOwnProperty(a)&&void 0!==p[a]&&(e[p[a]]=e[a],delete e[a]);for(var s in y)y.hasOwnProperty(s)&&(e[s]=e[s]||y[s]);i._id=(0,w.getUniqueWindowName)(),i._title=null==e.name?i._id:e.name,e.name=i._id,e.parent&&(e.parent._children.push(i),i._parent=e.parent,delete e.parent),f.default._windows.set(i._id,i),i._window=new fin.desktop.Window(e,u.bind(i),function(t){console.error(t,e)})}else i._id=e._id||e.name,i._title=i._id,i._window=e,f.default._windows.set(i._id,i),u.call(i);return i}return a(t,e),d(t,[{key:"isReady",value:function(){return this._ready}},{key:"onReady",value:function(e){if(this.isClosed())throw new Error("onReady can't be called on a closed window");return this.isReady()?e.call(this):void this.once("ready",e)}},{key:"isClosed",value:function(){return this._isClosed}},{key:"getPosition",value:function(){return this._bounds.getPosition()}},{key:"getWidth",value:function(){return this._bounds.getWidth()}},{key:"getHeight",value:function(){return this._bounds.getHeight()}},{key:"getSize",value:function(){return this._bounds.getSize()}},{key:"getBounds",value:function(){return this._bounds.clone()}},{key:"getParent",value:function(){return this._parent}},{key:"setParent",value:function(e){if(e!==this._parent){if(this._parent){var t=this._parent._children.indexOf(this);t>=0&&this._parent._children.splice(t,1)}e&&(this._parent=e,this._parent._children.push(this))}}},{key:"getChildren",value:function(){return this._children.slice()}},{key:"addChild",value:function(e){e.setParent(this)}},{key:"getTitle",value:function(){return this._title}},{key:"setTitle",value:function(e){if(!e)throw new Error("setTitle requires one argument of type String");this._titleEl.innerText=this._title=e}},{key:"isHidden",value:function(){return this._isHidden}},{key:"isShown",value:function(){return!this._isHidden}},{key:"isMinimized",value:function(){return this._isMinimized}},{key:"isMaximized",value:function(){return this._isMaximized}},{key:"isRestored",value:function(){return this.isShown()&&!this.isMinimized()&&!this.isMaximized()}},{key:"close",value:function(e){return this.isClosed()?e&&e():void this._window.close(e)}},{key:"minimize",value:function(e){if(!this._ready)throw new Error("minimize can't be called on an unready window");e=new w.SyncCallback(e);var t=!0,i=!1,n=void 0;try{for(var r,o=this._dockedGroup[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;a._isMinimized=!0,a._window.minimize(e.ref())}}catch(e){i=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(i)throw n}}}},{key:"maximize",value:function(e){if(!this._ready)throw new Error("maximize can't be called on an unready window");this._isMaximized=!0,this._window.maximize(e)}},{key:"show",value:function(e){if(!this._ready)throw new Error("show can't be called on an unready window");e=new w.SyncCallback(e);var t=!0,i=!1,n=void 0;try{for(var r,o=this._dockedGroup[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;a._isHidden=!1,a._window.show(e.ref())}}catch(e){i=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(i)throw n}}}},{key:"hide",value:function(e){if(!this._ready)throw new Error("hide can't be called on an unready window");e=new w.SyncCallback(e);var t=!0,i=!1,n=void 0;try{for(var r,o=this._dockedGroup[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;a._isHidden=!0,a._window.hide(e.ref())}}catch(e){i=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(i)throw n}}}},{key:"restore",value:function(e){if(!this._ready)throw new Error("restore can't be called on an unready window");e=new w.SyncCallback(e);var t=!0,i=!1,n=void 0;try{for(var r,o=this._dockedGroup[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;a._isHidden=!1,a._isMinimized=!1,a._isMaximized=!1,a._window.restore(e.ref())}}catch(e){i=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(i)throw n}}}},{key:"bringToFront",value:function(e){if(!this._ready)throw new Error("bringToFront can't be called on an unready window");var t=this,i=new w.SyncCallback(function(){t._window.bringToFront(e)}),n=!0,r=!1,o=void 0;try{for(var a,u=this._dockedGroup[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var s=a.value;s!==this&&s._window.bringToFront(i.ref())}}catch(e){r=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(r)throw o}}}},{key:"focus",value:function(e){if(!this._ready)throw new Error("focus can't be called on an unready window");var t=this,i=new w.SyncCallback(function(){t._window.focus(e)}),n=!0,r=!1,o=void 0;try{for(var a,u=this._dockedGroup[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var s=a.value;s!==this&&s._window.focus(i.ref())}}catch(e){r=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(r)throw o}}}},{key:"resizeTo",value:function(e,t,i){if(!this._ready)throw new Error("resizeTo can't be called on an unready window");if(this.emit("resize-before")){var n=new v.Position(e,t);this._window.resizeTo(n.left,n.top,"top-left",i)}}},{key:"moveTo",value:function(e,t,i){if(!this._ready)throw new Error("moveTo can't be called on an unready window");if(this.emit("move-before")){var n=new v.Position(e,t).subtract(this.getPosition());i=new w.SyncCallback(i);var r=!0,o=!1,a=void 0;try{for(var u,s=this._dockedGroup[Symbol.iterator]();!(r=(u=s.next()).done);r=!0){var d=u.value,l=d.getPosition().add(n);d._bounds.moveTo(l),d._window.moveTo(l.left,l.top,i.ref())}}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}}}},{key:"moveBy",value:function(e,t,i){if(!this._ready)throw new Error("moveBy can't be called on an unready window");if(this.emit("move-before")){var n=new v.Position(e,t);i=new w.SyncCallback(i);var r=!0,o=!1,a=void 0;try{for(var u,s=this._dockedGroup[Symbol.iterator]();!(r=(u=s.next()).done);r=!0){var d=u.value,l=d.getPosition().add(n);d._bounds.moveTo(l),d._window.moveTo(l.left,l.top,i.ref())}}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}}}},{key:"setSize",value:function(e,t,i){if(!this._ready)throw new Error("setSize can't be called on an unready window");var n=new v.Size(e,t);this._window.resizeTo(n.left,n.top,"top-left",i)}},{key:"setBounds",value:function(e,t,i,n,r){if(!this._ready)throw new Error("resizeTo can't be called on an unready window");var o=new v.BoundingBox(e,t,i,n);this._window.setBounds(o.left,o.top,o.right,o.bottom,r)}},{key:"dock",value:function(e){if(this.emit("dock-before")&&void 0!==e&&!(this._dockedGroup.indexOf(e)>=0)){var t=!0,i=!1,n=void 0;try{for(var r,o=e._dockedGroup[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;this._dockedGroup.push(a),a._dockedGroup=this._dockedGroup}}catch(e){i=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(i)throw n}}}}},{key:"undock",value:function(e){1!==this._dockedGroup.length&&(this._dockedGroup.splice(this._dockedGroup.indexOf(this),1),this._dockedGroup=[this])}},{key:"_dragStart",value:function(){if(this.emit("drag-start")){var e=!0,t=!1,i=void 0;try{for(var n,r=this._dockedGroup[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var o=n.value;o._dragStartPos=o.getPosition()}}catch(e){t=!0,i=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw i}}}}},{key:"_dragBy",value:function(e,t){if(this.emit("drag-before")){var i=this.getBounds().moveTo(this._dragStartPos.left+e,this._dragStartPos.top+t),n=new v.Vector(NaN,NaN),r=!0,o=!1,a=void 0;try{for(var u,s=f.default._windows.values()[Symbol.iterator]();!(r=(u=s.next()).done);r=!0){var d=u.value;d._dockedGroup!==this._dockedGroup&&n.setMin(i.getSnapDelta(d.getBounds()))}}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}e+=n.left||0,t+=n.top||0;var l=!0,h=!1,c=void 0;try{for(var w,y=this._dockedGroup[Symbol.iterator]();!(l=(w=y.next()).done);l=!0){var p=w.value,_=p._dragStartPos;void 0===_&&(_=p._dragStartPos=p.getPosition(),_.left-=e,_.top-=t),p._window.moveTo(_.left+e,_.top+t)}}catch(e){h=!0,c=e}finally{try{!l&&y.return&&y.return()}finally{if(h)throw c}}}}},{key:"_dragStop",value:function(){var e=this.getBounds(),t=!0,i=!1,n=void 0;try{for(var r,o=f.default._windows.values()[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;e.isTouching(a.getBounds())&&this.dock(a)}}catch(e){i=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(i)throw n}}var u=!0,s=!1,d=void 0;try{for(var l,h=this._dockedGroup[Symbol.iterator]();!(u=(l=h.next()).done);u=!0){var c=l.value;delete c._dragStartPos}}catch(e){s=!0,d=e}finally{try{!u&&h.return&&h.return()}finally{if(s)throw d}}this.emit("drag-stop")}}],[{key:"getAll",value:function(){return Array.from(f.default._windows.values())}},{key:"getByID",value:function(e){return f.default._windows.get(e)}},{key:"getCurrent",value:function(){return t.current}}]),t}(w.EventHandler);fin.desktop.main(c.default.ref(function(){function e(){f.default._windows?t():setTimeout(e,5)}m=fin.desktop.Window.getCurrent();var t=c.default.ref(s);e()})),f.default.Window=g,t.default=g,e.exports=t.default},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=i(22),o=n(r),a=i(10),u=n(a),s=i(23),d=n(s);o.default.messagebus=function(){var e={},t={};return window.addEventListener("message",function(i){var n=i.data,r=d.default.getByID(n.winID);if(r._id!==d.default.current._id){if(null!=t[n.event]&&null!=t[n.event][n.winID]){var o=!0,a=!1,u=void 0;try{for(var s,l=t[n.event][n.winID][Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var f=s.value;f.apply(r,n.args)}}catch(e){a=!0,u=e}finally{try{!o&&l.return&&l.return()}finally{if(a)throw u}}}if(null!=e[n.event]){var h=!0,c=!1,w=void 0;try{for(var v,y=e[n.event][Symbol.iterator]();!(h=(v=y.next()).done);h=!0){var p=v.value;p.apply(r,n.args)}}catch(e){c=!0,w=e}finally{try{!h&&y.return&&y.return()}finally{if(c)throw w}}}}},!1),{send:function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];var r=d.default.current,a={id:0,winID:r._id,event:e,args:i};if(i.length>0&&i[0]instanceof d.default){var u=i.shift();if(u._id===r._id)return;u._window.contentWindow.postMessage(a,"*")}else{var s=!0,l=!1,f=void 0;try{for(var h,c=o.default._windows.values()[Symbol.iterator]();!(s=(h=c.next()).done);s=!0){var w=h.value;r!==w&&w._window.contentWindow.postMessage(a,"*")}}catch(e){l=!0,f=e}finally{try{!s&&c.return&&c.return()}finally{if(l)throw f}}}},on:function(i,n,r){if(void 0===r&&(r=n,n=void 0),void 0!==n){if(n._id===d.default.current._id)return;var o=t[n._id]=t[n._id]||{};o[i]=o[i]||new Set,o[i].add(r)}else e[i]=e[i]||new Set,e[i].add(r)},off:function(i,n,r){if(void 0===r&&(r=n,n=void 0),void 0!==n){var o=t[n._id]=t[n._id]||{};o[i]=o[i]||new Set,o[i].delete(r)}else e[i]=e[i]||new Set,e[i].delete(r)}}}(),u.default._deref()},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=navigator.userAgent,t=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],i=void 0;if(/trident/i.test(t[1]))return i=/\brv[ :]+(\d+)/g.exec(e)||[],{name:"IE",version:i[1]||""};if("Chrome"===t[1]){if(i=e.match(/\bOPR\/(\d+)/),null!==i)return{name:"Opera",version:i[1]};if(i=e.match(/\bedge\/(\d+)/i),null!==i)return{name:"Edge",version:i[1]}}return t=t[2]?[t[1],t[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(i=e.match(/version\/(\d+)/i))&&t.splice(1,1,i[1]),{name:t[0],version:t[1]}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=i(1),s=n(u),d=i(2),l=o();s.default.runtime.name=l.name,s.default.runtime.version=l.version,s.default.runtime.isBrowser=!0,s.default.runtime.isMain=window.parent===window;try{window.parent.document}catch(e){s.default.runtime.isMain=!0}s.default.runtime.isMain?!function(){var e=1e3,t=function(){function e(){r(this,e),this._map=Object.create(null)}return a(e,[{key:"values",value:function e(){for(var e=Object.keys(this._map),t=0;t<e.length;t+=1)e[t]=this._map[e[t]];return e}},{key:"set",value:function(e,t){this._map[e]=t}},{key:"get",value:function(e){return this._map[e]}},{key:"delete",value:function(e){delete this._map[e]}}]),e}();s.default._launcher=window,s.default._internalBus=new d.EventHandler(Object.keys(s.default._eventListeners)),s.default._windows=new t,s.default._getNextZIndex=function(){return e+=1}}():(s.default._launcher=window.parent.windowmanager._launcher||window.parent,s.default._internalBus=window.parent.windowmanager._internalBus,s.default._windows=window.parent.windowmanager._windows,s.default._getNextZIndex=window.parent.windowmanager._getNextZIndex),s.default._internalBus.addPipe(s.default),t.default=s.default,e.exports=t.default},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(22),d=n(s),l=i(2),f=i(5),h={width:600,height:600,frame:!1,resizable:!0,saveWindowState:!1,autoShow:!0,icon:location.href+"favicon.ico",url:".",minWidth:100,minHeight:100,maxWidth:1/0,maxHeight:1/0},c={},w=["ready","drag-start","drag-before","drag-stop","dock-before","move","move-before","resize-before","close","minimize"],v=["-ms-transform","-moz-transform","-o-transform","-webkit-transform","transform"],y=function(e){function t(e){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,w));e=e||{};var n=!(e instanceof window.Window);if(i._ready=!1,i._isClosed=!1,i._isHidden=!1,i._isMinimized=!1,i._isMaximized=!1,i._dockedGroup=[i],i._children=[],i._parent=void 0,i._title=void 0,i._id=(0,l.getUniqueWindowName)(),n){for(var a in e)e.hasOwnProperty(a)&&void 0!==c[a]&&(e[c[a]]=e[a],delete e[a]);for(var u in h)h.hasOwnProperty(u)&&(e[u]=e[u]||h[u]);i._title=null==e.title?i._id:e.title,e.parent&&(e.parent._children.push(i),i._parent=e.parent,delete e.parent),i._minSize=new f.BoundingBox(e.minWidth,e.minHeight),i._maxSize=new f.BoundingBox(e.maxWidth,e.maxHeight);var s=d.default._launcher.document.createElement("iframe");s.src=e.url,s.style.position="absolute",Number.isFinite(e.left)||(e.left=(d.default._launcher.innerWidth-e.width)/2),s.style.left=e.left+"px",Number.isFinite(e.top)||(e.top=(d.default._launcher.innerHeight-e.height)/2),s.style.top=e.top+"px",s.style.width=e.width+"px",s.style.height=e.height+"px",s.style.minWidth=i._minSize.left+"px",s.style.minHeight=i._minSize.top+"px",s.style.maxWidth=i._maxSize.left+"px",s.style.maxHeight=i._maxSize.top+"px",s.style.margin=0,s.style.padding=0,s.style.border=0,s.style.resize="both",s.style.overflow="auto",d.default._launcher.document.body.appendChild(s),i._window=s,d.default._windows.set(i._id,i),i._ready=!0,i.emit("ready"),d.default._internalBus.emit("window-create",i),i.bringToFront(),i.focus()}else i._minSize=new f.BoundingBox(h.minWidth,h.minHeight),i._maxSize=new f.BoundingBox(h.maxWidth,h.maxHeight),i._window=e.document.body,d.default._windows.set(i._id,i),i._ready=!0;return i}return a(t,e),u(t,[{key:"isReady",value:function(){return this._ready}},{key:"onReady",value:function(e){if(this.isClosed())throw new Error("onReady can't be called on a closed window");return this.isReady()?e.call(this):void this.once("ready",e)}},{key:"isClosed",value:function(){return this._isClosed}},{key:"getPosition",value:function(){return new f.Position(this._window.getBoundingClientRect())}},{key:"getMinWidth",value:function(){return this._minSize.left}},{key:"getWidth",value:function(){return this._window.getBoundingClientRect().width}},{key:"getMaxWidth",value:function(){return this._maxSize.left}},{key:"getMinHeight",value:function(){return this._minSize.top}},{key:"getHeight",value:function(){return this._window.getBoundingClientRect().height}},{key:"getMaxHeight",value:function(){return this._maxSize.top}},{key:"getMinSize",value:function(){return this._minSize.clone()}},{key:"getSize",value:function(){var e=this._window.getBoundingClientRect();return new f.Size(e.width,e.height)}},{key:"getMaxSize",value:function(){return this._maxSize.clone()}},{key:"getBounds",value:function(){return new f.BoundingBox(this._window.getBoundingClientRect())}},{key:"getParent",value:function(){return this._parent}},{key:"setParent",value:function(e){if(e!==this._parent){if(this._parent){var t=this._parent._children.indexOf(this);t>=0&&this._parent._children.splice(t,1)}e&&(this._parent=e,
this._parent._children.push(this))}}},{key:"getChildren",value:function(){return this._children.slice()}},{key:"addChild",value:function(e){e.setParent(this)}},{key:"getTitle",value:function(){return this._title}},{key:"setTitle",value:function(e){if(!e)throw new Error("setTitle requires one argument of type String");this._title=e}},{key:"isHidden",value:function(){return this._isHidden}},{key:"isShown",value:function(){return!this._isHidden}},{key:"isMinimized",value:function(){return this._isMinimized}},{key:"isMaximized",value:function(){return this._isMaximized}},{key:"isRestored",value:function(){return this.isShown()&&!this.isMinimized()&&!this.isMaximized()}},{key:"close",value:function(e){if(this.isClosed())return e&&e();this._window.parentElement.removeChild(this._window),d.default._windows.delete(this._id),this.undock();var t=this.getParent(),i=!0,n=!1,r=void 0;try{for(var o,a=this.getChildren()[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var u=o.value;u.setParent(t)}}catch(e){n=!0,r=e}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}this.setParent(void 0),this._isClosed=!0,e&&e(),this.emit("close"),d.default._internalBus.emit("window-close",this)}},{key:"minimize",value:function(e){if(!this._ready)throw new Error("minimize can't be called on an unready window");var t=!0,i=!1,n=void 0;try{for(var r,o=this._dockedGroup[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;a._isMinimized=!0,a.emit("minimize")}}catch(e){i=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(i)throw n}}}},{key:"maximize",value:function(e){if(!this._ready)throw new Error("maximize can't be called on an unready window");this._restoreBounds=this.getBounds(),this._window.style.left=0,this._window.style.top=0,this._window.style.width="100%",this._window.style.height="100%",this._isMaximized=!0,e&&e()}},{key:"show",value:function(e){if(!this._ready)throw new Error("show can't be called on an unready window");var t=!0,i=!1,n=void 0;try{for(var r,o=this._dockedGroup[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;a._window.style.display="",a._isHidden=!1}}catch(e){i=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(i)throw n}}e&&e()}},{key:"hide",value:function(e){if(!this._ready)throw new Error("hide can't be called on an unready window");var t=!0,i=!1,n=void 0;try{for(var r,o=this._dockedGroup[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;a._window.style.display="none",a._isHidden=!0}}catch(e){i=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(i)throw n}}e&&e()}},{key:"restore",value:function(e){if(!this._ready)throw new Error("restore can't be called on an unready window");var t=!0,i=!1,n=void 0;try{for(var r,o=this._dockedGroup[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;a._isMaximized&&(a._window.style.left=a._restoreBounds.left+"px",a._window.style.top=a._restoreBounds.top+"px",a._window.style.width=a._restoreBounds.getWidth()+"px",a._window.style.height=a._restoreBounds.getHeight()+"px",a._isHidden=!1,a._isMinimized=!1,a._isMaximized=!1)}}catch(e){i=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(i)throw n}}e&&e()}},{key:"bringToFront",value:function(e){if(!this._ready)throw new Error("bringToFront can't be called on an unready window");var t=!0,i=!1,n=void 0;try{for(var r,o=this._dockedGroup[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;a!==this&&(a._window.style["z-index"]=d.default._getNextZIndex())}}catch(e){i=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(i)throw n}}this._window.style["z-index"]=d.default._getNextZIndex(),e&&e()}},{key:"focus",value:function(e){if(!this._ready)throw new Error("focus can't be called on an unready window");var t=!0,i=!1,n=void 0;try{for(var r,o=this._dockedGroup[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;a!==this&&a._window.contentWindow.focus()}}catch(e){i=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(i)throw n}}this._window.contentWindow.focus(),e&&e()}},{key:"resizeTo",value:function(e,t,i){if(!this._ready)throw new Error("resizeTo can't be called on an unready window");if(this.emit("resize-before")){var n=new f.Position(e,t);this.undock(),this._window.width=n.left+"px",this._window.height=n.top+"px",i&&i()}}},{key:"moveTo",value:function(e,t,i){if(!this._ready)throw new Error("moveTo can't be called on an unready window");if(this.emit("move-before")){var n=new f.Position(e,t).subtract(this.getPosition()),r=!0,o=!1,a=void 0;try{for(var u,s=this._dockedGroup[Symbol.iterator]();!(r=(u=s.next()).done);r=!0){var d=u.value,l=d.getPosition().add(n);d._window.style.left=l.left+"px",d._window.style.top=l.top+"px"}}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}i&&i()}}},{key:"moveBy",value:function(e,t,i){if(!this._ready)throw new Error("moveBy can't be called on an unready window");if(this.emit("move-before")){var n=new f.Position(e,t),r=!0,o=!1,a=void 0;try{for(var u,s=this._dockedGroup[Symbol.iterator]();!(r=(u=s.next()).done);r=!0){var d=u.value,l=d.getPosition().add(n);d._window.style.left=l.left+"px",d._window.style.top=l.top+"px"}}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}i&&i();var h=!0,c=!1,w=void 0;try{for(var v,y=this._dockedGroup[Symbol.iterator]();!(h=(v=y.next()).done);h=!0){var p=v.value;p.emit("move")}}catch(e){c=!0,w=e}finally{try{!h&&y.return&&y.return()}finally{if(c)throw w}}}}},{key:"setMinSize",value:function(e,t,i){if(!this._ready)throw new Error("setMinSize can't be called on an unready window");var n=new f.Size(e,t);this.undock(),this._minSize.left=n.left,this._minSize.top=n.top,this._window.style.minWidth=this._minSize.left+"px",this._window.style.minHeight=this._minSize.top+"px",this.getWidth()<n.left||this.getHeight()<n.top?(this._window.style.width=Math.max(this.getWidth(),n.left)+"px",this._window.style.height=Math.max(this.getHeight(),n.top)+"px",i&&i(),this.emit("resize")):i&&i()}},{key:"setSize",value:function(e,t,i){if(!this._ready)throw new Error("setMaxSize can't be called on an unready window");var n=new f.Size(e,t);this.undock(),this._window.style.width=Math.min(this._maxSize.left,Math.max(this._minSize.left,n.left))+"px",this._window.style.height=Math.min(this._maxSize.top,Math.max(this._minSize.top,n.top))+"px";var r=!0,o=!1,a=void 0;try{for(var u,s=v[Symbol.iterator]();!(r=(u=s.next()).done);r=!0){var d=u.value;this._window.style[d]=""}}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}i&&i(),this.emit("resize")}},{key:"forceScaledSize",value:function(e,t,i){if(!this._ready)throw new Error("setMaxSize can't be called on an unready window");var n=new f.Size(Math.min(this._maxSize.left,Math.max(this._minSize.left,e)),Math.min(this._maxSize.top,Math.max(this._minSize.top,t)));this.undock(),this._window.style.width=n.left+"px",this._window.style.height=n.top+"px";var r=Math.min(e/n.left,t/n.top),o=!0,a=!1,u=void 0;try{for(var s,d=v[Symbol.iterator]();!(o=(s=d.next()).done);o=!0){var l=s.value;this._window.style[l]="scale("+r+")"}}catch(e){a=!0,u=e}finally{try{!o&&d.return&&d.return()}finally{if(a)throw u}}i&&i(),this.emit("resize")}},{key:"setMaxSize",value:function(e,t,i){if(!this._ready)throw new Error("setMaxSize can't be called on an unready window");var n=new f.Size(e,t);if(this.undock(),this._maxSize.left=n.left,this._maxSize.top=n.top,this._window.style.maxWidth=this._maxSize.left+"px",this._window.style.maxHeight=this._maxSize.top+"px",this.getWidth()>n.left||this.getHeight()>n.top){this._window.style.width=Math.min(this.getWidth(),n.left)+"px",this._window.style.height=Math.min(this.getHeight(),n.top)+"px";var r=!0,o=!1,a=void 0;try{for(var u,s=v[Symbol.iterator]();!(r=(u=s.next()).done);r=!0){var d=u.value;this._window.style[d]=""}}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}i&&i(),this.emit("resize")}else i&&i()}},{key:"setBounds",value:function(e,t,i,n,r){if(!this._ready)throw new Error("resizeTo can't be called on an unready window");var o=new f.BoundingBox(e,t,i,n);this.undock(),this._window.style.left=o.left+"px",this._window.style.top=o.top+"px",this._window.style.width=Math.min(this._maxSize.left,Math.max(this._minSize.left,o.getWidth()))+"px",this._window.style.height=Math.min(this._maxSize.top,Math.max(this._minSize.top,o.getHeight()))+"px";var a=!0,u=!1,s=void 0;try{for(var d,l=v[Symbol.iterator]();!(a=(d=l.next()).done);a=!0){var h=d.value;this._window.style[h]=""}}catch(e){u=!0,s=e}finally{try{!a&&l.return&&l.return()}finally{if(u)throw s}}r&&r()}},{key:"dock",value:function(e){if(this.emit("dock-before")&&void 0!==e&&!(this._dockedGroup.indexOf(e)>=0)){var t=!0,i=!1,n=void 0;try{for(var r,o=e._dockedGroup[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;this._dockedGroup.push(a),a._dockedGroup=a._dockedGroup}}catch(e){i=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(i)throw n}}}}},{key:"undock",value:function(e){1!==this._dockedGroup.length&&(this._dockedGroup.splice(this._dockedGroup.indexOf(this),1),this._dockedGroup=[this])}},{key:"_dragStart",value:function(){if(this.emit("drag-start")){this.restore();var e=!0,t=!1,i=void 0;try{for(var n,r=this._dockedGroup[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var o=n.value;o._dragStartPos=o.getPosition()}}catch(e){t=!0,i=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw i}}}}},{key:"_dragBy",value:function(e,t){if(this.emit("drag-before")){var i=this.getBounds().moveTo(this._dragStartPos.left+e,this._dragStartPos.top+t),n=new f.Vector(NaN,NaN),r=!0,o=!1,a=void 0;try{for(var u,s=d.default._windows.values()[Symbol.iterator]();!(r=(u=s.next()).done);r=!0){var l=u.value;l._dockedGroup!==this._dockedGroup&&n.setMin(i.getSnapDelta(l.getBounds()))}}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}e+=n.left||0,t+=n.top||0;var h=!0,c=!1,w=void 0;try{for(var v,y=this._dockedGroup[Symbol.iterator]();!(h=(v=y.next()).done);h=!0){var p=v.value,_=p._dragStartPos;void 0===_&&(_=p._dragStartPos=p.getPosition(),_.left-=e,_.top-=t),p._window.style.left=_.left+e+"px",p._window.style.top=_.top+t+"px",p.emit("move")}}catch(e){c=!0,w=e}finally{try{!h&&y.return&&y.return()}finally{if(c)throw w}}}}},{key:"_dragStop",value:function(){var e=this.getBounds(),t=!0,i=!1,n=void 0;try{for(var r,o=d.default._windows.values()[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;e.isTouching(a.getBounds())&&this.dock(a)}}catch(e){i=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(i)throw n}}var u=!0,s=!1,l=void 0;try{for(var f,h=this._dockedGroup[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var c=f.value;delete c._dragStartPos}}catch(e){s=!0,l=e}finally{try{!u&&h.return&&h.return()}finally{if(s)throw l}}this.emit("drag-stop")}}],[{key:"getAll",value:function(){return Array.from(d.default._windows.values())}},{key:"getByID",value:function(e){return d.default._windows.get(e)}},{key:"getCurrent",value:function(){return t.current}}]),t}(l.EventHandler);d.default.runtime.isMain?(window.document.body.contentWindow=window,y.current=new y(window)):y.current=function(){var e=!0,t=!1,i=void 0;try{for(var n,r=d.default._windows.values()[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var o=n.value;if(o._window.contentWindow===window)return o}}catch(e){t=!0,i=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw i}}}(),d.default.runtime.isMain||!function(){var e=0,t=0,i=!1;window.addEventListener("focus",function(){y.current.bringToFront()}),window.addEventListener("mousedown",function(n){n.target.classList&&n.target.classList.contains("window-drag")&&(i=!0,e=n.screenX,t=n.screenY,y.current._dragStart())}),window.addEventListener("mousemove",function(n){i&&y.current._dragBy(n.screenX-e,n.screenY-t)}),window.addEventListener("mouseup",function(){i=!1,y.current._dragStop()})}(),d.default.Window=y,t.default=y,e.exports=t.default}])});
//# sourceMappingURL=windowmanager.min.js.map