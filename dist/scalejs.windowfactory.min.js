!function(a,b){if("function"==typeof define&&define.amd)define(["exports"],b);else if("undefined"!=typeof exports)b(exports);else{var c={exports:{}};b(c.exports),a.scalejsWindowfactory=c.exports}}(this,function(a){"use strict";function b(){var a=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];this._eventListeners={},this._eventPipes=[];var b=!0,c=!1,d=void 0;try{for(var e,f=a[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;this._eventListeners[g]=[]}}catch(h){c=!0,d=h}finally{try{!b&&f["return"]&&f["return"]()}finally{if(c)throw d}}}function c(){var a=navigator.userAgent,b=void 0,c=a.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(c[1])?(b=/\brv[ :]+(\d+)/g.exec(a)||[],{name:"IE ",version:b[1]||""}):"Chrome"===c[1]&&(b=a.match(/\bOPR\/(\d+)/),null!==b)?{name:"Opera",version:b[1]}:(c=c[2]?[c[1],c[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(b=a.match(/version\/(\d+)/i))&&c.splice(1,1,b[1]),{name:c[0],version:c[1]})}function d(a){if(!(this instanceof d))return new d(a);var b=this;this._deref=function(){b.count-=1,b.count<=0&&a()},this.count=0}Object.defineProperty(a,"__esModule",{value:!0});var e=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};b.prototype.on=function(a,b){a=a.toLowerCase().split(" ");var c=!0,d=!1,e=void 0;try{for(var f,g=a[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;if(void 0!==this._eventListeners[h]){if(!b||"function"!=typeof b.constructor)throw"on requires argument 'eventListener' of type Function";this._eventListeners[h].indexOf(b)>=0||this._eventListeners[h].push(b)}}}catch(i){d=!0,e=i}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}},b.prototype.once=function(a,b){function c(){this.off(a,c),b.apply(this,arguments)}this.on(a,c)},b.prototype.off=function(a,b){a=a.toLowerCase().split(" ");var c=!0,d=!1,e=void 0;try{for(var f,g=a[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;if(void 0===this._eventListeners[h])return;if(!b||"function"!=typeof b.constructor)throw"off requires argument 'eventListener' of type Function";var i=this._eventListeners[h].indexOf(b);i>=0&&this._eventListeners[h].splice(i,1)}}catch(j){d=!0,e=j}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}},b.prototype.clearEvent=function(a){a=a.toLowerCase();var b=!0,c=!1,d=void 0;try{for(var e,f=a[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;if(void 0===this._eventListeners[g])return;this._eventListeners[g]=[]}}catch(h){c=!0,d=h}finally{try{!b&&f["return"]&&f["return"]()}finally{if(c)throw d}}},b.prototype.emit=function(a){if(a=a.toLowerCase(),void 0!==this._eventListeners[a]){for(var b=new Array(arguments.length-1),c=1;c<arguments.length;c+=1)b[c-1]=arguments[c];var d=!0,e=!0,f=!1,g=void 0;try{for(var h,i=this._eventListeners[a][Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=h.value;d=d&&j.apply(this,b)!==!1}}catch(k){f=!0,g=k}finally{try{!e&&i["return"]&&i["return"]()}finally{if(f)throw g}}var l=!0,m=!1,n=void 0;try{for(var o,p=this._eventPipes[Symbol.iterator]();!(l=(o=p.next()).done);l=!0){var q=o.value;d=d&&q.emit.apply(q,arguments)!==!1}}catch(k){m=!0,n=k}finally{try{!l&&p["return"]&&p["return"]()}finally{if(m)throw n}}return d}},b.prototype.addPipe=function(a){if(!a||!a.emit)throw"addPipe requires argument 'eventHandler' of type EventHandler";this._eventPipes.indexOf(a)>=0||this._eventPipes.push(a)},b.prototype.removePipe=function(a){if(!a||!a.emit)throw"removePipe requires argument 'eventHandler' of type EventHandler";if(!(this._eventPipes.indexOf(a)>=0)){var b=this._eventPipes.indexOf(a);b>=0&&this._eventPipes.splice(b,1)}};var f=["window-create","window-close"],g=new b(f);if(g.isRenderer=!1,g.isBackend=!1,g.version="0.6.1alpha","undefined"==typeof window&&"undefined"!=typeof global&&global)g.isBackend=!0,"function"==typeof require&&require.main&&require.main.filename&&(global.nodeRequire=require,global.nodeRequire.windowfactoryPath=__filename,global.workingDir=global.nodeRequire("path").dirname(global.nodeRequire.main.filename));else if("undefined"!=typeof window&&window&&(g.isRenderer=!0,void 0!==window.nodeRequire)){g.electronVersion=window.nodeRequire.electronVersion,g.nodeVersion=window.nodeRequire.nodeVersion;var h=window.nodeRequire("electron").ipcRenderer;h.on("window-create",function(a,b){g.emit("window-create",g._resolveWindowWithID(b))})}if("undefined"!=typeof process&&process&&process.versions&&process.versions.electron)global.nodeRequire.electronVersion=g.electronVersion=global.process.versions.electron,global.nodeRequire.nodeVersion=g.nodeVersion=global.process.versions.node;else if("undefined"!=typeof fin&&fin&&fin.desktop&&fin.desktop.main)!function(){g.openfinVersion="startup";var a=[];g._openfinOnReady=function(b){if("startup"!==g.openfinVersion)return b();if(!b||b.constructor!==Function)throw"on requires argument 'eventListener' of type Function";a.indexOf(b)>=0||a.push(b)},fin.desktop.main(function(){g.openfinVersion="pending",fin.desktop.System.getVersion(function(a){g.openfinVersion=a});var c=fin.desktop.Application.getCurrent(),d=c.getWindow().contentWindow;d===window?(g._windows={},g._internalBus=new b(f)):g._internalBus=window.parent.windowfactory._internalBus,g._internalBus.addPipe(g);var e=!0,h=!1,i=void 0;try{for(var j,k=a[Symbol.iterator]();!(e=(j=k.next()).done);e=!0){var l=j.value;l()}}catch(m){h=!0,i=m}finally{try{!e&&k["return"]&&k["return"]()}finally{if(h)throw i}}a=void 0})}();else if(void 0===window.nodeRequire){var i=c();g.browserVersion=i.version,g.browserRuntime=i.name,window.parent===window?!function(){g._windows=[],g._launcher=window,g._internalBus=new b(f);var a=1e3;g._getNextZIndex=function(){return a+=1},g.isLauncher=!0}():(g._windows=window.parent.windowfactory._windows,g._launcher=window.parent.windowfactory._launcher||window.parent,g._internalBus=window.parent.windowfactory._internalBus,g._getNextZIndex=window.parent.windowfactory._getNextZIndex,g.isLauncher=!1),g._internalBus.addPipe(g)}"undefined"!=typeof global&&global&&(global.windowfactory=g),"undefined"!=typeof window&&window&&(window.windowfactory=g),d.prototype.ref=function(a){return this.count+=1,function(){a&&a.apply(null,arguments),this._deref()}},g.geometry=function(){function a(){for(var a=arguments[0],b=Math.abs(a),c=1;c<arguments.length;c+=1){var d=Math.abs(arguments[c]);d<b&&(a=arguments[c],b=d)}return{min:a,abs:b}}function b(a,c){if(!(this instanceof b))return new b(a,c);var d=a;d&&d.constructor!==Number?(this.left=d.left,this.top=d.top):(this.left=a,this.top=c)}function c(a,b,d,e){if(!(this instanceof c))return new c(a,b,d,e);var f=a;f&&f.constructor!==Number?(f.getBoundingBox&&(f=f.getBoundingBox()),this.left=f.left,this.top=f.top,this.right=f.right,this.bottom=f.bottom):(this.left=a,this.top=b,this.right=d,this.bottom=e)}function d(a,b){if(!(this instanceof d))return new d(a);if(b=b||{},!a)throw"CollisionMesh constructor requires argument 'boxes'";a.constructor!==Array&&(a=[a]),this.boxes=[];for(var e=0;e<a.length;e+=1)a[e].constructor===c?this.boxes.push(a[e]):a[e].constructor===d?this.boxes=this.boxes.concat(a[e].boxes):this.boxes=this.boxes.concat(a[e].getCollisionMesh(b).boxes)}return b.prototype.clone=function(){return new b(this)},b.prototype.getVector=function(){return this},b.prototype.getBoundingBox=function(){return new c(this.left,this.top,this.left,this.top)},b.prototype.getCollisionMesh=function(){return new d(this.getBoundingBox())},b.prototype.distanceSquared=function(a,c){var d=new b(a,c),e=d.subtract(this);return e.left*e.left+e.top*e.top},b.prototype.distance=function(a,b){return Math.sqrt(this.distanceSquared(a,b))},b.prototype.set=function(a){if(!a)throw"set requires argument 'other'";return a=a.getVector(),this.left=a.left,this.top=a.top,this},b.prototype.setMin=function(a){if(!a)throw"setMin requires argument 'other'";a=a.getVector(),(Math.abs(a.left)<Math.abs(this.left)||isNaN(this.left))&&(this.left=a.left),(Math.abs(a.top)<Math.abs(this.top)||isNaN(this.top))&&(this.top=a.top)},b.prototype.add=function(a){if(!a)throw"add requires argument 'other'";return a=a.getVector(),this.left+=a.left,this.top+=a.top,this},b.prototype.subtract=function(a){if(!a)throw"subtract requires argument 'other'";return a=a.getVector(),this.left-=a.left,this.top-=a.top,this},b.prototype.moveTo=function(a,b){return a&&a.constructor===Number&&(this.left=a),b&&b.constructor===Number&&(this.top=b),this},c.prototype.clone=function(){return new c(this)},c.prototype.isNaN=function(){return isNaN(this.left)||isNaN(this.top)||isNaN(this.right)||isNaN(this.bottom)},c.prototype.getWidth=function(){return Math.abs(this.right-this.left)},c.prototype.getHeight=function(){return Math.abs(this.bottom-this.top)},c.prototype.getSize=function(){return new b(this.getWidth(),this.getHeight())},c.prototype.getArea=function(){return this.getWidth()*this.getHeight()},c.prototype.getPosition=function(){return new b(this.left,this.top)},c.prototype.getBoundingBox=function(){return this},c.prototype.getCollisionMesh=function(){return new d(this)},c.prototype.getCenterPosition=function(){return new b(this.left+this.getWidth()/2,this.top+this.getHeight()/2)},c.prototype.difference=function(a){if(!a)throw"difference requires argument 'other'";return a=a.getBoundingBox(),new c(this.left-a.left,this.top-a.top,this.right-a.right,this.bottom-a.bottom)},c.prototype.getCenteredOnPosition=function(a){if(!a)throw"getCenteredOnPosition requires argument 'other'";return a=a.getBoundingBox(),a.getCenterPosition().subtract(this.getCenterPosition().subtract(this.getPosition()))},c.prototype.getIntersection=function(a){if(!a)throw"getIntersection requires argument 'other'";a=a.getBoundingBox();var d=Math.max(this.left,a.left),e=Math.max(this.top,a.top),f=Math.min(this.right,a.right),g=Math.min(this.bottom,a.bottom);return d<f&&e<g||d===f&&e<g||e===g&&d<f?new c(d,e,f,g):d===f&&e===g?new b(d,e):void 0},c.prototype.getDistanceSquaredToPoint=function(a,c){var d=new b(a,c),e=d.left<=this.left?this.left:d.left>=this.right?this.right:d.left,f=d.top<=this.top?this.top:d.top>=this.bottom?this.bottom:d.top,g=new b(e,f);return g.distanceSquared(d)},c.prototype.getDistanceToPoint=function(a,b){return Math.sqrt(this.getDistanceSquaredToPoint(a,b))},c.prototype.set=function(a,b,d,e){var f=new c(a,b,d,e);return this.left=f.left,this.top=f.top,this.right=f.right,this.bottom=f.bottom,this},c.prototype.moveTo=function(a,c){var d=new b(a,c);return this.right=d.left+(this.right-this.left),this.left=d.left,this.bottom=d.top+(this.bottom-this.top),this.top=d.top,this},c.prototype.moveBy=function(a,c){var d=new b(a,c);return this.left+=d.left,this.right+=d.left,this.top+=d.top,this.bottom+=d.top,this},c.prototype.resizeTo=function(a,c,d){var e=this.getSize(),f=new b(a||e.left,c||e.top);if(d=d||"top-left","string"==typeof d||d instanceof String){var g=d;d=this.getPosition(),g.indexOf("right")>=0&&(d.left+=e.left),g.indexOf("bottom")>=0&&(d.top+=e.top)}return this.left+=(d.left-this.left)*(e.left-f.left)/e.left,this.right+=(d.left-this.right)*(e.left-f.left)/e.left,this.top+=(d.top-this.top)*(e.top-f.top)/e.top,this.bottom+=(d.top-this.bottom)*(e.top-f.top)/e.top,this},c.prototype.isContains=function(a){if(!a)throw"isContains requires argument 'other'";return a=a.getBoundingBox(),a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom},c.prototype.someContains=function(a){if(!a)throw"someContains requires argument 'others'";if(a.constructor!==Array)throw"someContains requires argument 'others' of type Array";for(var b=0;b<a.length;b+=1)if(this.isContains(a[b]))return!0;return!1},c.prototype.isTouching=function(a){if(!a)throw"isTouching requires argument 'other'";return a=a.getBoundingBox(),this.top<=a.bottom&&this.bottom>=a.top&&(this.left===a.right||this.right===a.left)||this.left<=a.right&&this.right>=a.left&&(this.top===a.bottom||this.bottom===a.top)},c.prototype.getEdgeTouching=function(a){if(!a)throw"getEdgeTouching requires argument 'others'";a.constructor!==Array&&(a=[a]);for(var b=0;b<a.length;b+=1){var c=a[b].getBoundingBox();if(this.top<=c.bottom&&this.bottom>=c.top){if(this.left===c.right)return"left";if(this.right===c.left)return"right"}if(this.left<=c.right&&this.right>=c.left){if(this.top===c.bottom)return"top";if(this.bottom===c.top)return"bottom"}}},c.prototype.getOtherEdgeTouching=function(a){if(!a)throw"getOtherEdgeTouching requires argument 'others'";a.constructor!==Array&&(a=[a]);for(var b=0;b<a.length;b+=1){var c=a[b].getBoundingBox();if(this.top<=c.bottom&&this.bottom>=c.top){if(this.left===c.right)return"right";if(this.right===c.left)return"left"}if(this.left<=c.right&&this.right>=c.left){if(this.top===c.bottom)return"bottom";if(this.bottom===c.top)return"top"}}},c.prototype.getEdgeClosestOrder=function(a){if(!a)throw"getEdgeClosest requires argument 'other'";a=a.getBoundingBox();var b=this.getCenterPosition(),c=[];return c.push({edge:"left",dis:a.getDistanceSquaredToPoint(this.left,b.top)}),c.push({edge:"top",dis:a.getDistanceSquaredToPoint(b.left,this.top)}),c.push({edge:"right",dis:a.getDistanceSquaredToPoint(this.right,b.top)}),c.push({edge:"bottom",dis:a.getDistanceSquaredToPoint(b.left,this.bottom)}),c.sort(function(a,b){return a.dis-b.dis}),c.map(function(a){return a.edge})},c.prototype.getEdgeClosest=function(a){var b=this.getEdgeClosestOrder(a);return b[0]},c.prototype.getSnapDelta=function(c,d){if(!c)throw"getSnapDelta requires argument 'other'";c=c.getBoundingBox(),d=d||5;var e=new b(NaN,NaN);if(this.top<=c.bottom&&this.bottom>=c.top){var f=a(c.left-this.right,c.right-this.left);if(f.abs<=d){e.left=f.min;var g=a(c.top-this.top,c.bottom-this.bottom);g.abs<=d&&(e.top=g.min)}}else if(this.left<=c.right&&this.right>=c.left){var h=a(c.top-this.bottom,c.bottom-this.top);if(h.abs<=d){e.top=h.min;var i=a(c.left-this.left,c.right-this.right);i.abs<=d&&(e.left=i.min)}}return e},c.prototype.someTouching=function(a){if(!a)throw"someTouching requires argument 'others'";if(a.constructor!==Array)throw"someTouching requires argument 'others' of type Array";for(var b=0;b<a.length;b+=1)if(this.isTouching(a[b]))return!0;return!1},c.prototype.isColliding=function(a){if(!a)throw"isColliding requires argument 'other'";return a=a.getBoundingBox(),this.left<a.right&&this.right>a.left&&this.top<a.bottom&&this.bottom>a.top},c.prototype.someColliding=function(a){if(!a)throw"someColliding requires argument 'others'";if(a.constructor!==Array)throw"someColliding requires argument 'others' of type Array";for(var b=0;b<a.length;b+=1)if(this.isColliding(a[b]))return!0;return!1},c.prototype.getColliding=function(a){if(!a)throw"getColliding requires argument 'others'";if(a.constructor!==Array)throw"getColliding requires argument 'others' of type Array";for(var b=0;b<a.length;b+=1)if(this.isColliding(a[b]))return a[b]},c.prototype.isTouchingEdge=function(a){if(!a)throw"isTouchingEdge requires argument 'other'";return a=a.getBoundingBox(),this.left===a.right||this.right===a.left||this.top===a.bottom||this.bottom===a.top},d.prototype.clone=function(){for(var a=[],b=0;b<this.boxes;b+=1)a[b]=this.boxes[b].clone();return new d(a)},d.prototype.getWidth=function(){if(0===this.boxes.length)return 0;for(var a=this.boxes[0].left,b=this.boxes[0].right,c=1;c<this.boxes.length;c+=1)a=Math.min(a,this.boxes[c].left),b=Math.max(b,this.boxes[c].right);return b-a},d.prototype.getHeight=function(){if(0===this.boxes.length)return 0;for(var a=this.boxes[0].top,b=this.boxes[0].bottom,c=1;c<this.boxes.length;c+=1)a=Math.min(a,this.boxes[c].top),b=Math.max(b,this.boxes[c].bottom);return b-a},d.prototype.getSize=function(){return new b(this.getWidth(),this.getHeight())},d.prototype.getPosition=function(){return new b(this.getBoundingBox())},d.prototype.getBoundingBox=function(){if(0===this.boxes.length)return 0;for(var a=this.boxes[0].left,b=this.boxes[0].top,d=this.boxes[0].right,e=this.boxes[0].bottom,f=1;f<this.boxes.length;f+=1)a=Math.min(a,this.boxes[f].left),b=Math.min(b,this.boxes[f].top),d=Math.max(d,this.boxes[f].right),e=Math.max(e,this.boxes[f].bottom);return new c(a,b,d,e)},d.prototype.getCollisionMesh=function(){return this},d.prototype.moveTo=function(a,c){var d=new b(a,c);return this.moveBy(d.subtract(this.getPosition())),this},d.prototype.moveBy=function(a,c){for(var d=new b(a||0,c||0),e=0;e<this.boxes.length;e+=1)this.boxes[e].moveBy(d);return this},d.prototype.isContains=function(a){if(!a)throw"isContains requires argument 'other'";a=a.constructor===Array?new d(a):a.getCollisionMesh();for(var b=0;b<this.boxes.length;b+=1)if(this.boxes[b].someContains(a.boxes))return!0;return!1},d.prototype.someContains=function(a){if(!a)throw"someContains requires argument 'other'";a=a.constructor===Array?new d(a):a.getCollisionMesh();for(var b=0;b<this.boxes.length;b+=1)if(this.boxes[b].someContains(a.boxes))return!0;return!1},d.prototype.isTouching=function(a){if(!a)throw"isTouching requires argument 'other'";a=a.constructor===Array?new d(a):a.getCollisionMesh();for(var b=0;b<this.boxes.length;b+=1)if(this.boxes[b].someTouching(a.boxes))return!0;return!1},d.prototype.someTouching=function(a){if(!a)throw"someTouching requires argument 'others'";if(a.constructor!==Array)throw"someTouching requires argument 'others' to resolve to type Array";for(var b=0;b<a.length;b+=1)if(this.isTouching(a[b]))return!0;return!1},d.prototype.isColliding=function(a){if(!a)throw"isColliding requires argument 'other'";a=a.constructor===Array?new d(a):a.getCollisionMesh();for(var b=0;b<this.boxes.length;b+=1)if(this.boxes[b].someColliding(a.boxes))return!0;return!1},d.prototype.someColliding=function(a){if(!a)throw"someColliding requires argument 'others'";if(a.constructor!==Array)throw"someColliding requires argument 'others' to resolve to type Array";for(var b=0;b<a.length;b+=1)for(var c=0;c<this.boxes.length;c+=1)if(this.boxes[c].isColliding(a[b]))return!0;return!1},d.prototype.getColliding=function(a){if(!a)throw"getColliding requires argument 'other'";a=a.constructor===Array?new d(a):a.getCollisionMesh();for(var b=0;b<this.boxes.length;b+=1){var c=this.boxes[b].getColliding(a.boxes);if(c)return c}},{Vector:b,Position:b,Size:b,BoundingBox:c,CollisionMesh:d}}(),function(){g.isRenderer&&!g.isBackend&&g.browserVersion&&!function(){var a=g.geometry,c=a.Vector,d=a.Position,f=a.Size,h=a.BoundingBox,i=(window,{width:600,height:600,frame:!1,resizable:!0,saveWindowState:!1,autoShow:!0,icon:location.href+"favicon.ico",url:".",minWidth:100,minHeight:100,maxWidth:1/0,maxHeight:1/0}),j={},k=["drag-start","drag-before","drag-stop","dock-before","move","move-before","resize-before","close","minimize"],l=["-ms-transform","-moz-transform","-o-transform","-webkit-transform","transform"],m=function n(a){if(!(this instanceof n))return new n(a);a=a||{};var c=!(a instanceof window.Window);if(b.call(this,k),this._ready=!1,this._isClosed=!1,this._isMaximized=!1,this._dockedGroup=[this],this._children=[],this._parent=void 0,c){for(var d in a)a.hasOwnProperty(d)&&void 0!==j[d]&&(a[j[d]]=a[d],delete a[d]);for(var e in i)i.hasOwnProperty(e)&&(a[e]=a[e]||i[e]);a.parent&&(a.parent._children.push(this),this._parent=a.parent,delete a.parent),this._minSize=new h(a.minWidth,a.minHeight),this._maxSize=new h(a.maxWidth,a.maxHeight);var f=g._launcher.document.createElement("iframe");f.src=a.url,f.style.position="absolute",Number.isFinite(a.left)||(a.left=(g._launcher.innerWidth-a.width)/2),f.style.left=a.left+"px",Number.isFinite(a.top)||(a.top=(g._launcher.innerHeight-a.height)/2),f.style.top=a.top+"px",f.style.width=a.width+"px",f.style.height=a.height+"px",f.style.minWidth=this._minSize.left+"px",f.style.minHeight=this._minSize.top+"px",f.style.maxWidth=this._maxSize.left+"px",f.style.maxHeight=this._maxSize.top+"px",f.style.margin=0,f.style.padding=0,f.style.border=0,g._launcher.document.body.appendChild(f),this._window=f,g._windows.push(this),this._ready=!0,g._internalBus.emit("window-create",this),this.bringToFront(),this.focus()}else this._minSize=new h(i.minWidth,i.minHeight),this._maxSize=new h(i.maxWidth,i.maxHeight),this._window=a,g._windows.push(this),this._ready=!0};m.prototype=Object.create(b.prototype),m.prototype.constructor=m,m.getCurrent=function(){return m.current},m.prototype.isReady=function(){return void 0!==this._window},m.prototype.isClosed=function(){return this._isClosed},m.prototype.getPosition=function(){return new d(this._window.getBoundingClientRect())},m.prototype.getMinWidth=function(){return this._minSize.left},m.prototype.getWidth=function(){return this._window.getBoundingClientRect().width},m.prototype.getMaxWidth=function(){return this._maxSize.left},m.prototype.getMinHeight=function(){return this._minSize.top},m.prototype.getHeight=function(){return this._window.getBoundingClientRect().height},m.prototype.getMaxHeight=function(){return this._maxSize.top},m.prototype.getMinSize=function(){return this._minSize.clone()},m.prototype.getSize=function(){var a=this._window.getBoundingClientRect();return new f(a.width,a.height)},m.prototype.getMaxSize=function(){return this._maxSize.clone()},m.prototype.getBounds=function(){return new h(this._window.getBoundingClientRect())},m.prototype.getParent=function(){return this._parent},m.prototype.setParent=function(a){if(a!==this._parent){if(this._parent){var b=this._parent._children.indexOf(this);b>=0&&this._parent._children.splice(b,1)}a&&(this._parent=a,this._parent._children.push(this))}},m.prototype.getChildren=function(){return this._children.slice()},m.prototype.addChild=function(a){a.setParent(this)},m.prototype.close=function(a){this._window.parentElement.removeChild(this._window);var b=g._windows.indexOf(this);b>=0&&g._windows.splice(b,1),this.undock();var c=!0,d=!1,e=void 0;try{for(var f,h=this.getChildren()[Symbol.iterator]();!(c=(f=h.next()).done);c=!0){var i=f.value;i.setParent(i)}}catch(j){d=!0,e=j}finally{try{!c&&h["return"]&&h["return"]()}finally{if(d)throw e}}this.setParent(void 0),this._isClosed=!0,a&&a(),this.emit("close"),g._internalBus.emit("window-close",this)},m.prototype.minimize=function(a){if(!this._ready)throw"minimize can't be called on an unready window";var b=!0,c=!1,d=void 0;try{for(var e,f=this._dockedGroup[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;g.emit("minimize")}}catch(h){c=!0,d=h}finally{try{!b&&f["return"]&&f["return"]()}finally{if(c)throw d}}},m.prototype.maximize=function(a){if(!this._ready)throw"maximize can't be called on an unready window";this._restoreBounds=this.getBounds(),this._window.style.left=0,this._window.style.top=0,this._window.style.width="100%",this._window.style.height="100%",this._isMaximized=!0,a&&a()},m.prototype.show=function(a){if(!this._ready)throw"show can't be called on an unready window";var b=!0,c=!1,d=void 0;try{for(var e,f=this._dockedGroup[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;g._window.style.display=""}}catch(h){c=!0,d=h}finally{try{!b&&f["return"]&&f["return"]()}finally{if(c)throw d}}a&&a()},m.prototype.hide=function(a){if(!this._ready)throw"hide can't be called on an unready window";var b=!0,c=!1,d=void 0;try{for(var e,f=this._dockedGroup[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;g._window.style.display="none"}}catch(h){c=!0,d=h}finally{try{!b&&f["return"]&&f["return"]()}finally{if(c)throw d}}a&&a()},m.prototype.restore=function(a){if(!this._ready)throw"restore can't be called on an unready window";var b=!0,c=!1,d=void 0;try{for(var e,f=this._dockedGroup[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;g._isMaximized&&(g._window.style.left=g._restoreBounds.left+"px",g._window.style.top=g._restoreBounds.top+"px",g._window.style.width=g._restoreBounds.getWidth()+"px",g._window.style.height=g._restoreBounds.getHeight()+"px",g._isMaximized=!1)}}catch(h){c=!0,d=h}finally{try{!b&&f["return"]&&f["return"]()}finally{if(c)throw d}}a&&a()},m.prototype.bringToFront=function(a){if(!this._ready)throw"bringToFront can't be called on an unready window";var b=!0,c=!1,d=void 0;try{for(var e,f=this._dockedGroup[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var h=e.value;h!==this&&(h._window.style["z-index"]=g._getNextZIndex())}}catch(i){c=!0,d=i}finally{try{!b&&f["return"]&&f["return"]()}finally{if(c)throw d}}this._window.style["z-index"]=g._getNextZIndex(),a&&a()},m.prototype.focus=function(a){if(!this._ready)throw"focus can't be called on an unready window";var b=!0,c=!1,d=void 0;try{for(var e,f=this._dockedGroup[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;g!==this&&g._window.contentWindow.focus()}}catch(h){c=!0,d=h}finally{try{!b&&f["return"]&&f["return"]()}finally{if(c)throw d}}this._window.contentWindow.focus(),a&&a()},m.prototype.resizeTo=function(a,b,c){if(!this._ready)throw"resizeTo can't be called on an unready window";if(this.emit("resize-before")){var e=new d(a,b);this.undock(),this._window.width=e.left+"px",this._window.height=e.top+"px",c&&c()}},m.prototype.moveTo=function(a,b,c){if(!this._ready)throw"moveTo can't be called on an unready window";if(this.emit("move-before")){var e=new d(a,b).subtract(this.getPosition()),f=!0,g=!1,h=void 0;try{for(var i,j=this._dockedGroup[Symbol.iterator]();!(f=(i=j.next()).done);f=!0){var k=i.value,l=k.getPosition().add(e);k._window.style.left=l.left+"px",k._window.style.top=l.top+"px"}}catch(m){g=!0,h=m}finally{try{!f&&j["return"]&&j["return"]()}finally{if(g)throw h}}c&&c()}},m.prototype.moveBy=function(a,b,c){if(!this._ready)throw"moveBy can't be called on an unready window";if(this.emit("move-before")){var e=new d(a,b),f=!0,g=!1,h=void 0;try{for(var i,j=this._dockedGroup[Symbol.iterator]();!(f=(i=j.next()).done);f=!0){var k=i.value,l=k.getPosition().add(e);k._window.style.left=l.left+"px",k._window.style.top=l.top+"px"}}catch(m){g=!0,h=m}finally{try{!f&&j["return"]&&j["return"]()}finally{if(g)throw h}}c&&c();var n=!0,o=!1,p=void 0;try{for(var q,r=this._dockedGroup[Symbol.iterator]();!(n=(q=r.next()).done);n=!0){var s=q.value;s.emit("move")}}catch(m){o=!0,p=m}finally{try{!n&&r["return"]&&r["return"]()}finally{if(o)throw p}}}},m.prototype.setMinSize=function(a,b,c){if(!this._ready)throw"setMinSize can't be called on an unready window";var d=new f(a,b);this.undock(),this._minSize.left=d.left,this._minSize.top=d.top,this._window.style.minWidth=this._minSize.left+"px",this._window.style.minHeight=this._minSize.top+"px",this.getWidth()<d.left||this.getHeight()<d.top?(this._window.style.width=Math.max(this.getWidth(),d.left)+"px",this._window.style.height=Math.max(this.getHeight(),d.top)+"px",c&&c(),this.emit("resize")):c&&c()},m.prototype.setSize=function(a,b,c){if(!this._ready)throw"setMaxSize can't be called on an unready window";var d=new f(a,b);this.undock(),this._window.style.width=Math.min(this._maxSize.left,Math.max(this._minSize.left,d.left))+"px",this._window.style.height=Math.min(this._maxSize.top,Math.max(this._minSize.top,d.top))+"px";var e=!0,g=!1,h=void 0;try{for(var i,j=l[Symbol.iterator]();!(e=(i=j.next()).done);e=!0){var k=i.value;this._window.style[k]=""}}catch(m){g=!0,h=m}finally{try{!e&&j["return"]&&j["return"]()}finally{if(g)throw h}}c&&c(),this.emit("resize")},m.prototype.forceScaledSize=function(a,b,c){if(!this._ready)throw"setMaxSize can't be called on an unready window";var d=new f(Math.min(this._maxSize.left,Math.max(this._minSize.left,a)),Math.min(this._maxSize.top,Math.max(this._minSize.top,b)));this.undock(),this._window.style.width=d.left+"px",this._window.style.height=d.top+"px";var e=Math.min(a/d.left,b/d.top),g=!0,h=!1,i=void 0;try{for(var j,k=l[Symbol.iterator]();!(g=(j=k.next()).done);g=!0){var m=j.value;this._window.style[m]="scale("+e+")"}}catch(n){h=!0,i=n}finally{try{!g&&k["return"]&&k["return"]()}finally{if(h)throw i}}c&&c(),this.emit("resize")},m.prototype.setMaxSize=function(a,b,c){if(!this._ready)throw"setMaxSize can't be called on an unready window";var d=new f(a,b);if(this.undock(),this._maxSize.left=d.left,this._maxSize.top=d.top,this._window.style.maxWidth=this._maxSize.left+"px",this._window.style.maxHeight=this._maxSize.top+"px",this.getWidth()>d.left||this.getHeight()>d.top){this._window.style.width=Math.min(this.getWidth(),d.left)+"px",this._window.style.height=Math.min(this.getHeight(),d.top)+"px";var e=!0,g=!1,h=void 0;try{for(var i,j=l[Symbol.iterator]();!(e=(i=j.next()).done);e=!0){var k=i.value;this._window.style[k]=""}}catch(m){g=!0,h=m}finally{try{!e&&j["return"]&&j["return"]()}finally{if(g)throw h}}c&&c(),this.emit("resize")}else c&&c()},m.prototype.setBounds=function(a,b,c,d,e){if(!this._ready)throw"resizeTo can't be called on an unready window";var f=new h(a,b,c,d);this.undock(),this._window.style.left=f.left+"px",this._window.style.top=f.top+"px",this._window.style.width=Math.min(this._maxSize.left,Math.max(this._minSize.left,f.getWidth()))+"px",this._window.style.height=Math.min(this._maxSize.top,Math.max(this._minSize.top,f.getHeight()))+"px";var g=!0,i=!1,j=void 0;try{for(var k,m=l[Symbol.iterator]();!(g=(k=m.next()).done);g=!0){var n=k.value;this._window.style[n]=""}}catch(o){i=!0,j=o}finally{try{!g&&m["return"]&&m["return"]()}finally{if(i)throw j}}e&&e()},m.prototype.dock=function(a){if(this.emit("dock-before")&&void 0!==a&&!(this._dockedGroup.indexOf(a)>=0)){var b=!0,c=!1,d=void 0;try{for(var e,f=a._dockedGroup[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;this._dockedGroup.push(g),g._dockedGroup=this._dockedGroup}}catch(h){c=!0,d=h}finally{try{!b&&f["return"]&&f["return"]()}finally{if(c)throw d}}}},m.prototype.undock=function(a){1!==this._dockedGroup.length&&(this._dockedGroup.splice(this._dockedGroup.indexOf(this),1),this._dockedGroup=[this])},m.prototype._dragStart=function(){if(this.emit("drag-start")){this.restore();var a=!0,b=!1,c=void 0;try{for(var d,e=this._dockedGroup[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value;f._dragStartPos=f.getPosition()}}catch(g){b=!0,c=g}finally{try{!a&&e["return"]&&e["return"]()}finally{if(b)throw c}}}},m.prototype._dragBy=function(a,b){if(this.emit("drag-before")){var d=this.getBounds().moveTo(this._dragStartPos.left+a,this._dragStartPos.top+b),e=new c(NaN,NaN),f=!0,h=!1,i=void 0;try{for(var j,k=g._windows[Symbol.iterator]();!(f=(j=k.next()).done);f=!0){var l=j.value;l._dockedGroup!==this._dockedGroup&&e.setMin(d.getSnapDelta(l.getBounds()))}}catch(m){h=!0,i=m}finally{try{!f&&k["return"]&&k["return"]()}finally{if(h)throw i}}a+=e.left||0,b+=e.top||0;var n=!0,o=!1,p=void 0;try{for(var q,r=this._dockedGroup[Symbol.iterator]();!(n=(q=r.next()).done);n=!0){var s=q.value,t=s._dragStartPos;void 0===t&&(t=s._dragStartPos=s.getPosition(),t.left-=a,t.top-=b),s._window.style.left=t.left+a+"px",s._window.style.top=t.top+b+"px",s.emit("move")}}catch(m){o=!0,p=m}finally{try{!n&&r["return"]&&r["return"]()}finally{if(o)throw p}}}},m.prototype._dragStop=function(){var a=this.getBounds(),b=!0,c=!1,d=void 0;try{for(var e,f=g._windows[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var h=e.value;a.isTouching(h.getBounds())&&this.dock(h)}}catch(i){c=!0,d=i}finally{try{!b&&f["return"]&&f["return"]()}finally{if(c)throw d}}var j=!0,k=!1,l=void 0;try{for(var m,n=this._dockedGroup[Symbol.iterator]();!(j=(m=n.next()).done);j=!0){var o=m.value;delete o._dragStartPos}}catch(i){k=!0,l=i}finally{try{!j&&n["return"]&&n["return"]()}finally{if(k)throw l}}this.emit("drag-stop")},m.current=function(){var a=!0,b=!1,c=void 0;try{for(var d,e=g._windows[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value;if(f._window.contentWindow===window)return f}}catch(h){b=!0,c=h}finally{try{!a&&e["return"]&&e["return"]()}finally{if(b)throw c}}}(),m.getAll=function(){return g._windows.splice()},e(g,{Window:m})}()}(),function(){function a(a){if(!(a&&a.constructor&&a.call&&a.apply))throw"onReady expects a function passed as the callback argument!";d&&a(),c.indexOf(a)>=0||c.push(a)}if(g.isRenderer&&!g.isBackend&&g.browserVersion){var b=g.Window,c=[],d=!0;g.isLauncher||!function(){
var a=0,c=0,d=!1;window.addEventListener("focus",function(){b.current.bringToFront()}),window.addEventListener("mousedown",function(e){e.target.classList.contains("window-drag")&&(d=!0,a=event.screenX,c=event.screenY,b.current._dragStart())}),window.addEventListener("mousemove",function(e){d&&b.current._dragBy(event.screenX-a,event.screenY-c)}),window.addEventListener("mouseup",function(){d=!1,b.current._dragStop()})}(),e(g,{onReady:a,isReady:function(){return d},runtime:g.browserRuntime,runtimeVersion:g.browserVersion})}}(),function(){g.electronVersion&&(g.isRenderer?!function(){var a=g.geometry,c=(a.Vector,a.Position),d=(a.Size,a.BoundingBox),f=nodeRequire("electron").remote,h=nodeRequire("path"),i=f.BrowserWindow,j=f.getCurrentWindow(),k={width:600,height:600,frame:!1,resizable:!0,hasShadow:!1,icon:"favicon.ico",webPreferences:{nodeIntegration:!1,preload:nodeRequire.windowfactoryPath}},l={left:"x",top:"y"},m=["drag-start","drag-before","drag-stop","dock-before","move","move-before","resize-before","close","minimize"],n={},o=function p(a){function c(){s.emit("move")}function d(){s.emit("minimize")}function e(){s._isClosed=!0,s.emit("close"),s._window=void 0}if(!(this instanceof p))return new p(a);a=a||{};var g=void 0===a.webContents;if(b.call(this,m),g){for(var o in a)a.hasOwnProperty(o)&&void 0!==l[o]&&(a[l[o]]=a[o],delete a[o]);for(var q in k)k.hasOwnProperty(q)&&(a[q]=a[q]||k[q]);var r=a.url;delete a.url,this._window=new i(a),this._window.loadURL("/"!==r[0]?r:h.join(f.getGlobal("workingDir"),r))}else this._window=a;n[this._window.id]=this,this._window._ensureDockSystem();var s=this;this._window.on("move",c),this._window.on("minimize",c),this._isClosed=!1,this._window.on("close",e),j.on("close",function(){delete n[this._window.id],s.off("move",c),s.off("close",e),s.off("minimize",d)}),this._ready=!0,g&&this._window._notifyReady()};o.prototype=Object.create(b.prototype),o.prototype.constructor=o,o.getCurrent=function(){return o.current},o.prototype.isReady=function(){return void 0!==this._window},o.prototype.isClosed=function(){return this._isClosed},o.prototype.getPosition=function(){var a=this._window.getPosition();return new c(a[0],a[1])},o.prototype.getWidth=function(){var a=this._window.getSize();return a[0]},o.prototype.getHeight=function(){var a=this._window.getSize();return a[1]},o.prototype.getSize=function(){var a=this._window.getSize();return new c(a[0],a[1])},o.prototype.getBounds=function(){var a=this._window.getBounds();return new d(a.x,a.y,a.x+a.width,a.y+a.height)},o.prototype.close=function(a){this._window.close(),a&&a()},o.prototype.minimize=function(a){if(!this._ready)throw"minimize can't be called on an unready window";this._window._dockMinimize(),a&&a()},o.prototype.maximize=function(a){if(!this._ready)throw"maximize can't be called on an unready window";this._window.maximize(),a&&a()},o.prototype.show=function(a){if(!this._ready)throw"show can't be called on an unready window";this._window._dockShow(),a&&a()},o.prototype.hide=function(a){if(!this._ready)throw"hide can't be called on an unready window";this._window._dockHide(),a&&a()},o.prototype.restore=function(a){if(!this._ready)throw"restore can't be called on an unready window";this._window.restore(),a&&a()},o.prototype.bringToFront=function(a){if(!this._ready)throw"bringToFront can't be called on an unready window";this._window.setAlwaysOnTop(!0),this._window.setAlwaysOnTop(!1),a&&a()},o.prototype.focus=function(a){if(!this._ready)throw"focus can't be called on an unready window";this._window.focus(),a&&a()},o.prototype.resizeTo=function(a,b,d){if(!this._ready)throw"resizeTo can't be called on an unready window";var e=new c(a,b);this._window.setSize(e.left,e.top),d&&d()},o.prototype.moveTo=function(a,b,d){if(!this._ready)throw"moveTo can't be called on an unready window";new c(a,b);this._window._dockMoveTo(a,b),d&&d()},o.prototype.moveBy=function(a,b,d){if(!this._ready)throw"moveBy can't be called on an unready window";var e=this.getBounds(),f=new c(a,b);this._window._dockMoveTo(e.left+f.left,e.top+f.top),d&&d()},o.prototype.setBounds=function(a,b,c,e,f){if(!this._ready)throw"resizeTo can't be called on an unready window";new d(a,b,c,e);this._window.setSize({x:a,y:b,width:c-a,height:e-b}),f&&f()},o.prototype.dock=function(a){this._window.dock(a._window.id)},o.prototype.undock=function(){this._window.undock()},o.current=new o(j),o.getAll=function(){},e(g,{Window:o,_resolveWindowWithID:function(a){return n[a]||new o(i.fromId(a))}})}():g.isBackend&&!function(){var a=global.nodeRequire("electron"),b=a.BrowserWindow;a.ipcMain;b&&!function(){var a=g.geometry,c=a.Vector,d=a.BoundingBox;b.prototype._notifyReady=function(){var a=!0,c=!1,d=void 0;try{for(var e,f=b.getAllWindows()[Symbol.iterator]();!(a=(e=f.next()).done);a=!0){var g=e.value;g.webContents.send("window-create",g.id)}}catch(h){c=!0,d=h}finally{try{!a&&f["return"]&&f["return"]()}finally{if(c)throw d}}},b.prototype._ensureDockSystem=function(){var a=this;void 0===this._dockedGroup&&!function(){a._dockedGroup=[a],a.on("closed",function(){this.undock()}),a.on("maximize",function(){this.undock()}),a.on("minimize",function(){this._dockMinimize()}),a.on("restore",function(){var a=!0,b=!1,c=void 0;try{for(var d,e=this._dockedGroup[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value;f!==this&&f.restore()}}catch(g){b=!0,c=g}finally{try{!a&&e["return"]&&e["return"]()}finally{if(b)throw c}}});var b=a.getBounds();a.on("move",function(){var a=this.getBounds();b=a}),a.on("resize",function(){var a=this.getBounds();a.width===b.width&&a.height===b.height||this.undock(),b=a})}()},b.prototype.dock=function(a){this._ensureDockSystem();var c=b.fromId(a);if(void 0!==c&&!(this._dockedGroup.indexOf(c)>=0)){c._ensureDockSystem();var d=!0,e=!1,f=void 0;try{for(var g,h=c._dockedGroup[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=g.value;this._dockedGroup.push(i),i._dockedGroup=this._dockedGroup}}catch(j){e=!0,f=j}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}}},b.prototype.undock=function(){this._ensureDockSystem(),1!==this._dockedGroup.length&&(this._dockedGroup.splice(this._dockedGroup.indexOf(this),1),this._dockedGroup=[this])},b.prototype._dockFocus=function(){this._ensureDockSystem();var a=!0,b=!1,c=void 0;try{for(var d,e=this._dockedGroup[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value;f!==this&&(f.setAlwaysOnTop(!0),f.setAlwaysOnTop(!1))}}catch(g){b=!0,c=g}finally{try{!a&&e["return"]&&e["return"]()}finally{if(b)throw c}}this.setAlwaysOnTop(!0),this.setAlwaysOnTop(!1)},b.prototype._dragStart=function(){this._ensureDockSystem(),this.restore();var a=!0,b=!1,c=void 0;try{for(var d,e=this._dockedGroup[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value;f._dragStartPos=f.getPosition()}}catch(g){b=!0,c=g}finally{try{!a&&e["return"]&&e["return"]()}finally{if(b)throw c}}},b.prototype._getBounds=function(){var a=this.getBounds();return new d(a.x,a.y,a.x+a.width,a.y+a.height)},b.prototype._dragBy=function(a,d){this._ensureDockSystem();var e=this._getBounds().moveTo(this._dragStartPos[0]+a,this._dragStartPos[1]+d),f=new c(NaN,NaN),g=!0,h=!1,i=void 0;try{for(var j,k=b.getAllWindows()[Symbol.iterator]();!(g=(j=k.next()).done);g=!0){var l=j.value;l._dockedGroup!==this._dockedGroup&&f.setMin(e.getSnapDelta(l._getBounds()))}}catch(m){h=!0,i=m}finally{try{!g&&k["return"]&&k["return"]()}finally{if(h)throw i}}a+=f.left||0,d+=f.top||0;var n=!0,o=!1,p=void 0;try{for(var q,r=this._dockedGroup[Symbol.iterator]();!(n=(q=r.next()).done);n=!0){var s=q.value,t=s._dragStartPos;void 0===t&&(t=s._dragStartPos=s.getPosition(),t[0]-=a,t[1]-=d),s.setPosition(t[0]+a,t[1]+d)}}catch(m){o=!0,p=m}finally{try{!n&&r["return"]&&r["return"]()}finally{if(o)throw p}}},b.prototype._dragStop=function(){this._ensureDockSystem();var a=this._getBounds(),c=!0,d=!1,e=void 0;try{for(var f,g=b.getAllWindows()[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;a.isTouching(h._getBounds())&&this.dock(h.id)}}catch(i){d=!0,e=i}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}var j=!0,k=!1,l=void 0;try{for(var m,n=this._dockedGroup[Symbol.iterator]();!(j=(m=n.next()).done);j=!0){var o=m.value;delete o._dragStartPos}}catch(i){k=!0,l=i}finally{try{!j&&n["return"]&&n["return"]()}finally{if(k)throw l}}},b.prototype._dockMoveTo=function(a,b){this._ensureDockSystem();var c=this.getPosition(),d=a-c[0],e=b-c[1],f=!0,g=!1,h=void 0;try{for(var i,j=this._dockedGroup[Symbol.iterator]();!(f=(i=j.next()).done);f=!0){var k=i.value,l=k.getPosition();k.setPosition(l[0]+d,l[1]+e)}}catch(m){g=!0,h=m}finally{try{!f&&j["return"]&&j["return"]()}finally{if(g)throw h}}},b.prototype._dockMinimize=function(a,b){this._ensureDockSystem();var c=!0,d=!1,e=void 0;try{for(var f,g=this._dockedGroup[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;h.minimize()}}catch(i){d=!0,e=i}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}},b.prototype._dockHide=function(a,b){this._ensureDockSystem();var c=!0,d=!1,e=void 0;try{for(var f,g=this._dockedGroup[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;h.hide()}}catch(i){d=!0,e=i}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}},b.prototype._dockShow=function(a,b){this._ensureDockSystem();var c=!0,d=!1,e=void 0;try{for(var f,g=this._dockedGroup[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;h.show()}}catch(i){d=!0,e=i}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}}}()}())}(),function(){function a(a){if(!(a&&a.constructor&&a.call&&a.apply))throw"onReady expects a function passed as the callback argument!";f&&a(),d.indexOf(a)>=0||d.push(a)}if(g.isRenderer&&!g.isBackend&&g.electronVersion){var b=g.Window,c=nodeRequire("electron").remote,d=[],f=!0,h=0,i=0,j=!1;b.current._window.on("focus",function(){b.current._window._dockFocus()}),window.addEventListener("mousedown",function(a){a.target.classList.contains("window-drag")&&(j=!0,h=a.screenX,i=a.screenY,b.current._window._dragStart())}),window.addEventListener("mousemove",function(a){j&&b.current._window._dragBy(a.screenX-h,a.screenY-i)}),window.addEventListener("mouseup",function(){j=!1,b.current._window._dragStop()});var k=c.Menu,l=c.MenuItem,m=null,n=new k;n.append(new l({label:"Reload",accelerator:"CmdOrCtrl+R",click:function(){b.current._window.reload()}})),n.append(new l({label:"Reload app and restart children",click:function(){c.app.relaunch(),c.app.exit(0)}})),n.append(new l({type:"separator"})),n.append(new l({label:"Inspect Element",accelerator:"CmdOrCtrl+Shift+I",click:function(){b.current._window.inspectElement(m.x,m.y)}})),window.addEventListener("contextmenu",function(a){a.preventDefault(),m={x:a.x,y:a.y},n.popup(b.current._window)},!1),e(g,{onReady:a,isReady:function(){return f},runtime:"Electron",runtimeVersion:g.electronVersion})}}(),function(){g.isRenderer&&!g.isBackend&&g.openfinVersion&&!function(){for(var a=g.geometry,c=a.Vector,f=a.Position,h=a.Size,i=a.BoundingBox,j=void 0,k={defaultWidth:600,defaultHeight:600,frame:!1,resizable:!0,saveWindowState:!1,autoShow:!0,icon:location.href+"favicon.ico"},l={left:"defaultLeft",top:"defaultTop",width:"defaultWidth",height:"defaultHeight"},m=["drag-start","drag-before","drag-stop","dock-before","move","move-before","resize-before","close","minimize"],n=[],o=0;o<256;o+=1)n[o]=(o<16?"0":"")+o.toString(16);var p=function(){var a=4294967295*Math.random()|0,b=4294967295*Math.random()|0,c=4294967295*Math.random()|0,d=4294967295*Math.random()|0;return n[255&a]+n[a>>8&255]+n[a>>16&255]+n[a>>24&255]+"-"+n[255&b]+n[b>>8&255]+"-"+n[b>>16&15|64]+n[b>>24&255]+"-"+n[63&c|128]+n[c>>8&255]+"-"+n[c>>16&255]+n[c>>24&255]+n[255&d]+n[d>>8&255]+n[d>>16&255]+n[d>>24&255]},q=function(){return"window"+p()+(new Date).getTime()},r=function s(a){if(!(this instanceof s))return new s(a);a=a||{};var c=void 0===a.app_uuid;if(b.call(this,m),this._bounds=new i,this._ready=!1,this._isClosed=!1,this._dockedGroup=[this],this._parent=void 0,c){for(var d in a)a.hasOwnProperty(d)&&void 0!==l[d]&&(a[l[d]]=a[d],delete a[d]);for(var e in k)k.hasOwnProperty(e)&&(a[e]=a[e]||k[e]);a.name=q(),a.parent&&(a.parent._children.push(this),this._parent=a.parent,delete a.parent),g._windows[a.name]=this,this._window=new fin.desktop.Window(a,this._setupDOM.bind(this),function(b){console.error(b,a)})}else this._window=a,g._windows[this._window.name]=this,this._setupDOM()};r.prototype=Object.create(b.prototype),r.prototype.constructor=r,r.prototype._setupDOM=function(){function a(){e._window.contentWindow.windowfactory?(e._window.contentWindow.windowfactory._windows=g._windows,e._window.contentWindow.windowfactory._internalBus=g._internalBus):setTimeout(a,5)}function b(a){e._bounds.set(a.left,a.top,a.left+a.width,a.top+a.height),0!==a.changeType&&e.undock(),1!==a.changeType&&e.emit("move")}function c(){e._isClosed=!0,delete g._windows[e._window.name],e.undock();var a=!0,b=!1,c=void 0;try{for(var d,f=e.getChildren()[Symbol.iterator]();!(a=(d=f.next()).done);a=!0){var h=d.value;h.setParent(h)}}catch(i){b=!0,c=i}finally{try{!a&&f["return"]&&f["return"]()}finally{if(b)throw c}}e.setParent(void 0),e.emit("close"),g._internalBus.emit("window-close",e),e._window=void 0}function d(){e.emit("minimize")}var e=this;a(),this._window.getBounds(function(a){e._bounds.set(a.left,a.top,a.left+a.width,a.top+a.height)}),this._window.addEventListener("bounds-changing",b),this._window.addEventListener("bounds-changed",b),this._window.addEventListener("closed",c),this._window.addEventListener("minimized",d),this._ready=!0,g._internalBus.emit("window-create",this)},r.getCurrent=function(){return r.current},r.prototype.isReady=function(){return void 0!==this._window},r.prototype.isClosed=function(){return this._isClosed},r.prototype.getPosition=function(){return this._bounds.getPosition()},r.prototype.getWidth=function(){return this._bounds.getWidth()},r.prototype.getHeight=function(){return this._bounds.getHeight()},r.prototype.getSize=function(){return this._bounds.getSize()},r.prototype.getBounds=function(){return this._bounds.clone()},r.prototype.getParent=function(){return this._parent},r.prototype.setParent=function(a){if(a!==this._parent){if(this._parent){var b=this._parent._children.indexOf(this);b>=0&&this._parent._children.splice(b,1)}a&&(this._parent=a,this._parent._children.push(this))}},r.prototype.getChildren=function(){return this._children.slice()},r.prototype.addChild=function(a){a.setParent(this)},r.prototype.close=function(a){this._window.close(a)},r.prototype.minimize=function(a){if(!this._ready)throw"minimize can't be called on an unready window";a=new d(a);var b=!0,c=!1,e=void 0;try{for(var f,g=this._dockedGroup[Symbol.iterator]();!(b=(f=g.next()).done);b=!0){var h=f.value;h._window.minimize(a.ref())}}catch(i){c=!0,e=i}finally{try{!b&&g["return"]&&g["return"]()}finally{if(c)throw e}}},r.prototype.maximize=function(a){if(!this._ready)throw"maximize can't be called on an unready window";this._window.maximize(a)},r.prototype.show=function(a){if(!this._ready)throw"show can't be called on an unready window";a=new d(a);var b=!0,c=!1,e=void 0;try{for(var f,g=this._dockedGroup[Symbol.iterator]();!(b=(f=g.next()).done);b=!0){var h=f.value;h._window.show(a.ref())}}catch(i){c=!0,e=i}finally{try{!b&&g["return"]&&g["return"]()}finally{if(c)throw e}}},r.prototype.hide=function(a){if(!this._ready)throw"hide can't be called on an unready window";a=new d(a);var b=!0,c=!1,e=void 0;try{for(var f,g=this._dockedGroup[Symbol.iterator]();!(b=(f=g.next()).done);b=!0){var h=f.value;h._window.hide(a.ref())}}catch(i){c=!0,e=i}finally{try{!b&&g["return"]&&g["return"]()}finally{if(c)throw e}}},r.prototype.restore=function(a){if(!this._ready)throw"restore can't be called on an unready window";a=new d(a);var b=!0,c=!1,e=void 0;try{for(var f,g=this._dockedGroup[Symbol.iterator]();!(b=(f=g.next()).done);b=!0){var h=f.value;h._window.restore(a.ref())}}catch(i){c=!0,e=i}finally{try{!b&&g["return"]&&g["return"]()}finally{if(c)throw e}}},r.prototype.bringToFront=function(a){if(!this._ready)throw"bringToFront can't be called on an unready window";var b=this,c=new d(function(){b._window.bringToFront(a)}),e=!0,f=!1,g=void 0;try{for(var h,i=this._dockedGroup[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=h.value;j!==this&&j._window.bringToFront(c.ref())}}catch(k){f=!0,g=k}finally{try{!e&&i["return"]&&i["return"]()}finally{if(f)throw g}}},r.prototype.focus=function(a){if(!this._ready)throw"focus can't be called on an unready window";var b=this,c=new d(function(){b._window.focus(a)}),e=!0,f=!1,g=void 0;try{for(var h,i=this._dockedGroup[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=h.value;j!==this&&j._window.focus(c.ref())}}catch(k){f=!0,g=k}finally{try{!e&&i["return"]&&i["return"]()}finally{if(f)throw g}}},r.prototype.resizeTo=function(a,b,c){if(!this._ready)throw"resizeTo can't be called on an unready window";if(this.emit("resize-before")){var d=new f(a,b);this._window.resizeTo(d.left,d.top,"top-left",c)}},r.prototype.moveTo=function(a,b,c){if(!this._ready)throw"moveTo can't be called on an unready window";if(this.emit("move-before")){var e=new f(a,b).subtract(this.getPosition());c=new d(c);var g=!0,h=!1,i=void 0;try{for(var j,k=this._dockedGroup[Symbol.iterator]();!(g=(j=k.next()).done);g=!0){var l=j.value,m=l.getPosition().add(e);l._bounds.moveTo(m),l._window.moveTo(m.left,m.top,c.ref())}}catch(n){h=!0,i=n}finally{try{!g&&k["return"]&&k["return"]()}finally{if(h)throw i}}}},r.prototype.moveBy=function(a,b,c){if(!this._ready)throw"moveBy can't be called on an unready window";if(this.emit("move-before")){var e=new f(a,b);c=new d(c);var g=!0,h=!1,i=void 0;try{for(var j,k=this._dockedGroup[Symbol.iterator]();!(g=(j=k.next()).done);g=!0){var l=j.value,m=l.getPosition().add(e);l._bounds.moveTo(m),l._window.moveTo(m.left,m.top,c.ref())}}catch(n){h=!0,i=n}finally{try{!g&&k["return"]&&k["return"]()}finally{if(h)throw i}}}},r.prototype.setSize=function(a,b,c){if(!this._ready)throw"setMaxSize can't be called on an unready window";var d=new h(a,b);this._window.resizeTo(d.left,d.top,"top-left",c)},r.prototype.setBounds=function(a,b,c,d,e){if(!this._ready)throw"resizeTo can't be called on an unready window";var f=new i(a,b,c,d);this._window.setBounds(f.left,f.top,f.right,f.bottom,e)},r.prototype.dock=function(a){if(this.emit("dock-before")&&void 0!==a&&!(this._dockedGroup.indexOf(a)>=0)){var b=!0,c=!1,d=void 0;try{for(var e,f=a._dockedGroup[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;this._dockedGroup.push(g),g._dockedGroup=this._dockedGroup}}catch(h){c=!0,d=h}finally{try{!b&&f["return"]&&f["return"]()}finally{if(c)throw d}}}},r.prototype.undock=function(a){1!==this._dockedGroup.length&&(this._dockedGroup.splice(this._dockedGroup.indexOf(this),1),this._dockedGroup=[this])},r.prototype._dragStart=function(){if(this.emit("drag-start")){var a=!0,b=!1,c=void 0;try{for(var d,e=this._dockedGroup[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value;f._dragStartPos=f.getPosition()}}catch(g){b=!0,c=g}finally{try{!a&&e["return"]&&e["return"]()}finally{if(b)throw c}}}},r.prototype._dragBy=function(a,b){if(this.emit("drag-before")){var d=this.getBounds().moveTo(this._dragStartPos.left+a,this._dragStartPos.top+b),e=new c(NaN,NaN);for(var f in g._windows)if(g._windows.hasOwnProperty(f)){var h=g._windows[f];h._dockedGroup!==this._dockedGroup&&e.setMin(d.getSnapDelta(h.getBounds()))}a+=e.left||0,b+=e.top||0;var i=!0,j=!1,k=void 0;try{for(var l,m=this._dockedGroup[Symbol.iterator]();!(i=(l=m.next()).done);i=!0){var n=l.value,o=n._dragStartPos;void 0===o&&(o=n._dragStartPos=n.getPosition(),o.left-=a,o.top-=b),n._window.moveTo(o.left+a,o.top+b)}}catch(p){j=!0,k=p}finally{try{!i&&m["return"]&&m["return"]()}finally{if(j)throw k}}}},r.prototype._dragStop=function(){var a=this.getBounds();for(var b in g._windows)if(g._windows.hasOwnProperty(b)){var c=g._windows[b];a.isTouching(c.getBounds())&&this.dock(c)}var d=!0,e=!1,f=void 0;try{for(var h,i=this._dockedGroup[Symbol.iterator]();!(d=(h=i.next()).done);d=!0){var j=h.value;delete j._dragStartPos}}catch(k){e=!0,f=k}finally{try{!d&&i["return"]&&i["return"]()}finally{if(e)throw f}}this.emit("drag-stop")},fin.desktop.main(function(){j=fin.desktop.Window.getCurrent();var a=function b(){g._windows?r.current=g._windows[j.name]||new r(j):setTimeout(b,5)};a()}),r.getAll=function(){return Object.keys(g._windows).map(function(a){return g._windows[a]})},e(g,{Window:r})}()}(),function(){function a(a){if(!(a&&a.constructor&&a.call&&a.apply))throw"onReady expects a function passed as the callback argument!";f&&a(),d.indexOf(a)>=0||d.push(a)}function b(){c.current._window.addEventListener("focused",function(){c.current.bringToFront()}),c.current._window.addEventListener("restored",function(){var a=!0,b=!1,d=void 0;try{for(var e,f=c.current._dockedGroup[Symbol.iterator]();!(a=(e=f.next()).done);a=!0){var g=e.value;g!==c.current&&g._window.restore()}}catch(h){b=!0,d=h}finally{try{!a&&f["return"]&&f["return"]()}finally{if(b)throw d}}}),f=!0;for(var a=0;a<d.length;a+=1)d[a]();d=[]}if(g.isRenderer&&!g.isBackend&&g.openfinVersion){var c=g.Window,d=[],f=!1;g._openfinOnReady(function(){function a(){c.current&&"pending"!==g.openfinVersion?(g.runtimeVersion=g.openfinVersion,b()):setTimeout(a,5)}var d=0,e=0,f=!1;window.addEventListener("mousedown",function(a){a.target.classList.contains("window-drag")&&(f=!0,d=event.screenX,e=event.screenY,c.current._dragStart())}),window.addEventListener("mousemove",function(a){f&&c.current._dragBy(event.screenX-d,event.screenY-e)}),window.addEventListener("mouseup",function(){f=!1,c.current._dragStop()}),a()}),e(g,{onReady:a,isReady:function(){return f},runtime:"OpenFin",runtimeVersion:g.openfinVersion})}}(),a["default"]=g,"undefined"!=typeof define&&define&&define.amd&&require(["scalejs.core"],function(a){a["default"].registerExtension({windowfactory:g})})});