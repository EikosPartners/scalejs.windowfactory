!function(a,b){if("function"==typeof define&&define.amd)define(["exports","path"],b);else if("undefined"!=typeof exports)b(exports,require("path"));else{var c={exports:{}};b(c.exports,a.path),a.scalejsWindowfactory=c.exports}}(this,function(a,b){"use strict";function c(){var a=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];this._eventListeners={},this._eventPipes=[];for(var b=a,c=Array.isArray(b),d=0,b=c?b:b[Symbol.iterator]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{if(d=b.next(),d.done)break;e=d.value}var f=e;this._eventListeners[f]=[]}}function d(){var a=navigator.userAgent,b=void 0,c=a.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(c[1])?(b=/\brv[ :]+(\d+)/g.exec(a)||[],{name:"IE ",version:b[1]||""}):"Chrome"===c[1]&&(b=a.match(/\bOPR\/(\d+)/),null!==b)?{name:"Opera",version:b[1]}:(c=c[2]?[c[1],c[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(b=a.match(/version\/(\d+)/i))&&c.splice(1,1,b[1]),{name:c[0],version:c[1]})}function e(a){if(!(this instanceof e))return new e(a);var b=this;this._deref=function(){b.count-=1,b.count<=0&&a()},this.count=0}Object.defineProperty(a,"__esModule",{value:!0});var f=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};c.prototype.on=function(a,b){a=a.toLowerCase().split(" ");for(var c=a,d=Array.isArray(c),e=0,c=d?c:c[Symbol.iterator]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{if(e=c.next(),e.done)break;f=e.value}var g=f;if(void 0!==this._eventListeners[g]){if(!b||"function"!=typeof b.constructor)throw"on requires argument 'eventListener' of type Function";this._eventListeners[g].indexOf(b)>=0||this._eventListeners[g].push(b)}}},c.prototype.once=function(a,b){function c(){this.off(a,c),b.apply(this,arguments)}this.on(a,c)},c.prototype.off=function(a,b){a=a.toLowerCase().split(" ");for(var c=a,d=Array.isArray(c),e=0,c=d?c:c[Symbol.iterator]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{if(e=c.next(),e.done)break;f=e.value}var g=f;if(void 0===this._eventListeners[g])return;if(!b||"function"!=typeof b.constructor)throw"off requires argument 'eventListener' of type Function";var h=this._eventListeners[g].indexOf(b);h>=0&&this._eventListeners[g].splice(h,1)}},c.prototype.clearEvent=function(a){a=a.toLowerCase();for(var b=a,c=Array.isArray(b),d=0,b=c?b:b[Symbol.iterator]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{if(d=b.next(),d.done)break;e=d.value}var f=e;if(void 0===this._eventListeners[f])return;this._eventListeners[f]=[]}},c.prototype.emit=function(a){if(a=a.toLowerCase(),void 0!==this._eventListeners[a]){for(var b=new Array(arguments.length-1),c=1;c<arguments.length;c+=1)b[c-1]=arguments[c];for(var d=!0,e=this._eventListeners[a],f=Array.isArray(e),g=0,e=f?e:e[Symbol.iterator]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{if(g=e.next(),g.done)break;h=g.value}var i=h;d=d&&i.apply(this,b)!==!1}for(var j=this._eventPipes,k=Array.isArray(j),l=0,j=k?j:j[Symbol.iterator]();;){var m;if(k){if(l>=j.length)break;m=j[l++]}else{if(l=j.next(),l.done)break;m=l.value}var n=m;d=d&&n.emit.apply(n,arguments)!==!1}return d}},c.prototype.addPipe=function(a){if(!a||!a.emit)throw"addPipe requires argument 'eventHandler' of type EventHandler";this._eventPipes.indexOf(a)>=0||this._eventPipes.push(a)},c.prototype.removePipe=function(a){if(!a||!a.emit)throw"removePipe requires argument 'eventHandler' of type EventHandler";if(!(this._eventPipes.indexOf(a)>=0)){var b=this._eventPipes.indexOf(a);b>=0&&this._eventPipes.splice(b,1)}};var g=["window-create","window-close"],h=new c(g);if(h._isRenderer=!1,h._isBackend=!1,h.version="0.8.0",h.runtime={name:void 0,version:void 0,isBrowser:!1,isElectron:!1,isOpenFin:!1},"undefined"!=typeof navigator&&(h.isMobile=function(a){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))}(navigator.userAgent||navigator.vendor||window.opera),h.isDesktop=!h.isMobile),"undefined"!=typeof global&&global)h._isBackend=!0,"function"==typeof require&&require.main&&require.main.filename&&!function(){var a=require,c=b.dirname(require.main.filename);a.windowfactoryPath=__filename,global.nodeRequire=a,global.workingDir=c,process.once("loaded",function(){global.nodeRequire=a,global.workingDir=c})}();else if("undefined"!=typeof window&&window&&(h._isRenderer=!0,void 0!==window.nodeRequire)){h.runtime=window.nodeRequire.runtime;var i=window.nodeRequire("electron").ipcRenderer;i.on("window-create",function(a,b){h.emit("window-create",h._resolveWindowWithID(b))})}if("undefined"!=typeof process&&process&&process.versions&&process.versions.electron)h.runtime.name="Electron",h.runtime.isElectron=!0,h.runtime.version=global.process.versions.electron,global.nodeRequire.runtime=h.runtime;else if("undefined"!=typeof fin&&fin&&fin.desktop&&fin.desktop.main)!function(){h.runtime.name="OpenFin",h.runtime.isOpenFin=!0,h.runtime.version=void 0;var a=[];h._openfinOnReady=function(b){if(void 0!==h.runtime.version)return b();if(!b||b.constructor!==Function)throw"on requires argument 'eventListener' of type Function";a.indexOf(b)>=0||a.push(b)},fin.desktop.main(function(){fin.desktop.System.getVersion(function(a){h.runtime.version=a});var b=fin.desktop.Application.getCurrent(),d=b.getWindow().contentWindow;d===window?(h._windows={},h._internalBus=new c(g)):h._internalBus=window.parent.windowfactory._internalBus,h._internalBus.addPipe(h);for(var e=a,f=Array.isArray(e),i=0,e=f?e:e[Symbol.iterator]();;){var j;if(f){if(i>=e.length)break;j=e[i++]}else{if(i=e.next(),i.done)break;j=i.value}var k=j;k()}a=void 0})}();else if(void 0===window.nodeRequire){var j=d(),k=window.parent===window;h.runtime.name=j.name,h.runtime.isBrowser=!0,h.runtime.version=j.version;try{window.parent.document}catch(l){k=!0}k?!function(){h._windows=[],h._launcher=window,h._internalBus=new c(g);var a=1e3;h._getNextZIndex=function(){return a+=1},h.isLauncher=!0}():(h._windows=window.parent.windowfactory._windows,h._launcher=window.parent.windowfactory._launcher||window.parent,h._internalBus=window.parent.windowfactory._internalBus,h._getNextZIndex=window.parent.windowfactory._getNextZIndex,h.isLauncher=!1),h._internalBus.addPipe(h)}"undefined"!=typeof global&&global&&(global.windowfactory=h),"undefined"!=typeof window&&window&&(window.windowfactory=h);var m=function(){for(var a=[],b=0;b<256;b+=1)a[b]=(b<16?"0":"")+b.toString(16);return function(){var b=4294967295*Math.random()|0,c=4294967295*Math.random()|0,d=4294967295*Math.random()|0,e=4294967295*Math.random()|0;return a[255&b]+a[b>>8&255]+a[b>>16&255]+a[b>>24&255]+"-"+a[255&c]+a[c>>8&255]+"-"+a[c>>16&15|64]+a[c>>24&255]+"-"+a[63&d|128]+a[d>>8&255]+"-"+a[d>>16&255]+a[d>>24&255]+a[255&e]+a[e>>8&255]+a[e>>16&255]+a[e>>24&255]}}();h.getUniqueWindowName=function(){return"window"+m()+(new Date).getTime()},e.prototype.ref=function(a){return this.count+=1,function(){a&&a.apply(null,arguments),this._deref()}},h.geometry=function(){function a(){for(var a=arguments[0],b=Math.abs(a),c=1;c<arguments.length;c+=1){var d=Math.abs(arguments[c]);d<b&&(a=arguments[c],b=d)}return{min:a,abs:b}}function b(a,c){if(!(this instanceof b))return new b(a,c);var d=a;d&&d.constructor!==Number?(this.left=d.left,this.top=d.top):(this.left=a,this.top=c)}function c(a,b,d,e){if(!(this instanceof c))return new c(a,b,d,e);var f=a;f&&f.constructor!==Number?(f.getBoundingBox&&(f=f.getBoundingBox()),this.left=f.left,this.top=f.top,this.right=f.right,this.bottom=f.bottom):(this.left=a,this.top=b,this.right=d,this.bottom=e)}function d(a,b){if(!(this instanceof d))return new d(a);if(b=b||{},!a)throw"CollisionMesh constructor requires argument 'boxes'";a.constructor!==Array&&(a=[a]),this.boxes=[];for(var e=0;e<a.length;e+=1)a[e].constructor===c?this.boxes.push(a[e]):a[e].constructor===d?this.boxes=this.boxes.concat(a[e].boxes):this.boxes=this.boxes.concat(a[e].getCollisionMesh(b).boxes)}return b.prototype.clone=function(){return new b(this)},b.prototype.getVector=function(){return this},b.prototype.getBoundingBox=function(){return new c(this.left,this.top,this.left,this.top)},b.prototype.getCollisionMesh=function(){return new d(this.getBoundingBox())},b.prototype.distanceSquared=function(a,c){var d=new b(a,c),e=d.subtract(this);return e.left*e.left+e.top*e.top},b.prototype.distance=function(a,b){return Math.sqrt(this.distanceSquared(a,b))},b.prototype.set=function(a){if(!a)throw"set requires argument 'other'";return a=a.getVector(),this.left=a.left,this.top=a.top,this},b.prototype.setMin=function(a){if(!a)throw"setMin requires argument 'other'";a=a.getVector(),(Math.abs(a.left)<Math.abs(this.left)||isNaN(this.left))&&(this.left=a.left),(Math.abs(a.top)<Math.abs(this.top)||isNaN(this.top))&&(this.top=a.top)},b.prototype.add=function(a){if(!a)throw"add requires argument 'other'";return a=a.getVector(),this.left+=a.left,this.top+=a.top,this},b.prototype.subtract=function(a){if(!a)throw"subtract requires argument 'other'";return a=a.getVector(),this.left-=a.left,this.top-=a.top,this},b.prototype.moveTo=function(a,b){return a&&a.constructor===Number&&(this.left=a),b&&b.constructor===Number&&(this.top=b),this},c.prototype.clone=function(){return new c(this)},c.prototype.isNaN=function(){return isNaN(this.left)||isNaN(this.top)||isNaN(this.right)||isNaN(this.bottom)},c.prototype.getWidth=function(){return Math.abs(this.right-this.left)},c.prototype.getHeight=function(){return Math.abs(this.bottom-this.top)},c.prototype.getSize=function(){return new b(this.getWidth(),this.getHeight())},c.prototype.getArea=function(){return this.getWidth()*this.getHeight()},c.prototype.getPosition=function(){return new b(this.left,this.top)},c.prototype.getBoundingBox=function(){return this},c.prototype.getCollisionMesh=function(){return new d(this)},c.prototype.getCenterPosition=function(){return new b(this.left+this.getWidth()/2,this.top+this.getHeight()/2)},c.prototype.difference=function(a){if(!a)throw"difference requires argument 'other'";return a=a.getBoundingBox(),new c(this.left-a.left,this.top-a.top,this.right-a.right,this.bottom-a.bottom)},c.prototype.getCenteredOnPosition=function(a){if(!a)throw"getCenteredOnPosition requires argument 'other'";return a=a.getBoundingBox(),a.getCenterPosition().subtract(this.getCenterPosition().subtract(this.getPosition()))},c.prototype.getIntersection=function(a){if(!a)throw"getIntersection requires argument 'other'";a=a.getBoundingBox();var d=Math.max(this.left,a.left),e=Math.max(this.top,a.top),f=Math.min(this.right,a.right),g=Math.min(this.bottom,a.bottom);return d<f&&e<g||d===f&&e<g||e===g&&d<f?new c(d,e,f,g):d===f&&e===g?new b(d,e):void 0},c.prototype.getDistanceSquaredToPoint=function(a,c){var d=new b(a,c),e=d.left<=this.left?this.left:d.left>=this.right?this.right:d.left,f=d.top<=this.top?this.top:d.top>=this.bottom?this.bottom:d.top,g=new b(e,f);return g.distanceSquared(d)},c.prototype.getDistanceToPoint=function(a,b){return Math.sqrt(this.getDistanceSquaredToPoint(a,b))},c.prototype.set=function(a,b,d,e){var f=new c(a,b,d,e);return this.left=f.left,this.top=f.top,this.right=f.right,this.bottom=f.bottom,this},c.prototype.moveTo=function(a,c){var d=new b(a,c);return this.right=d.left+(this.right-this.left),this.left=d.left,this.bottom=d.top+(this.bottom-this.top),this.top=d.top,this},c.prototype.moveBy=function(a,c){var d=new b(a,c);return this.left+=d.left,this.right+=d.left,this.top+=d.top,this.bottom+=d.top,this},c.prototype.resizeTo=function(a,c,d){var e=this.getSize(),f=new b(a||e.left,c||e.top);if(d=d||"top-left","string"==typeof d||d instanceof String){var g=d;d=this.getPosition(),g.indexOf("right")>=0&&(d.left+=e.left),g.indexOf("bottom")>=0&&(d.top+=e.top)}return this.left+=(d.left-this.left)*(e.left-f.left)/e.left,this.right+=(d.left-this.right)*(e.left-f.left)/e.left,this.top+=(d.top-this.top)*(e.top-f.top)/e.top,this.bottom+=(d.top-this.bottom)*(e.top-f.top)/e.top,this},c.prototype.isContains=function(a){if(!a)throw"isContains requires argument 'other'";return a=a.getBoundingBox(),a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom},c.prototype.someContains=function(a){if(!a)throw"someContains requires argument 'others'";if(a.constructor!==Array)throw"someContains requires argument 'others' of type Array";for(var b=0;b<a.length;b+=1)if(this.isContains(a[b]))return!0;return!1},c.prototype.isTouching=function(a){if(!a)throw"isTouching requires argument 'other'";return a=a.getBoundingBox(),this.top<=a.bottom&&this.bottom>=a.top&&(this.left===a.right||this.right===a.left)||this.left<=a.right&&this.right>=a.left&&(this.top===a.bottom||this.bottom===a.top)},c.prototype.getEdgeTouching=function(a){if(!a)throw"getEdgeTouching requires argument 'others'";a.constructor!==Array&&(a=[a]);for(var b=0;b<a.length;b+=1){var c=a[b].getBoundingBox();if(this.top<=c.bottom&&this.bottom>=c.top){if(this.left===c.right)return"left";if(this.right===c.left)return"right"}if(this.left<=c.right&&this.right>=c.left){if(this.top===c.bottom)return"top";if(this.bottom===c.top)return"bottom"}}},c.prototype.getOtherEdgeTouching=function(a){if(!a)throw"getOtherEdgeTouching requires argument 'others'";a.constructor!==Array&&(a=[a]);for(var b=0;b<a.length;b+=1){var c=a[b].getBoundingBox();if(this.top<=c.bottom&&this.bottom>=c.top){if(this.left===c.right)return"right";if(this.right===c.left)return"left"}if(this.left<=c.right&&this.right>=c.left){if(this.top===c.bottom)return"bottom";if(this.bottom===c.top)return"top"}}},c.prototype.getEdgeClosestOrder=function(a){if(!a)throw"getEdgeClosest requires argument 'other'";a=a.getBoundingBox();var b=this.getCenterPosition(),c=[];return c.push({edge:"left",dis:a.getDistanceSquaredToPoint(this.left,b.top)}),c.push({edge:"top",dis:a.getDistanceSquaredToPoint(b.left,this.top)}),c.push({edge:"right",dis:a.getDistanceSquaredToPoint(this.right,b.top)}),c.push({edge:"bottom",dis:a.getDistanceSquaredToPoint(b.left,this.bottom)}),c.sort(function(a,b){return a.dis-b.dis}),c.map(function(a){return a.edge})},c.prototype.getEdgeClosest=function(a){var b=this.getEdgeClosestOrder(a);return b[0]},c.prototype.getSnapDelta=function(c,d){if(!c)throw"getSnapDelta requires argument 'other'";c=c.getBoundingBox(),d=d||5;var e=new b(NaN,NaN);if(this.top<=c.bottom&&this.bottom>=c.top){var f=a(c.left-this.right,c.right-this.left);if(f.abs<=d){e.left=f.min;var g=a(c.top-this.top,c.bottom-this.bottom);g.abs<=d&&(e.top=g.min)}}else if(this.left<=c.right&&this.right>=c.left){var h=a(c.top-this.bottom,c.bottom-this.top);if(h.abs<=d){e.top=h.min;var i=a(c.left-this.left,c.right-this.right);i.abs<=d&&(e.left=i.min)}}return e},c.prototype.someTouching=function(a){if(!a)throw"someTouching requires argument 'others'";if(a.constructor!==Array)throw"someTouching requires argument 'others' of type Array";for(var b=0;b<a.length;b+=1)if(this.isTouching(a[b]))return!0;return!1},c.prototype.isColliding=function(a){if(!a)throw"isColliding requires argument 'other'";return a=a.getBoundingBox(),this.left<a.right&&this.right>a.left&&this.top<a.bottom&&this.bottom>a.top},c.prototype.someColliding=function(a){if(!a)throw"someColliding requires argument 'others'";if(a.constructor!==Array)throw"someColliding requires argument 'others' of type Array";for(var b=0;b<a.length;b+=1)if(this.isColliding(a[b]))return!0;return!1},c.prototype.getColliding=function(a){if(!a)throw"getColliding requires argument 'others'";if(a.constructor!==Array)throw"getColliding requires argument 'others' of type Array";for(var b=0;b<a.length;b+=1)if(this.isColliding(a[b]))return a[b]},c.prototype.isTouchingEdge=function(a){if(!a)throw"isTouchingEdge requires argument 'other'";return a=a.getBoundingBox(),this.left===a.right||this.right===a.left||this.top===a.bottom||this.bottom===a.top},d.prototype.clone=function(){for(var a=[],b=0;b<this.boxes;b+=1)a[b]=this.boxes[b].clone();return new d(a)},d.prototype.getWidth=function(){if(0===this.boxes.length)return 0;for(var a=this.boxes[0].left,b=this.boxes[0].right,c=1;c<this.boxes.length;c+=1)a=Math.min(a,this.boxes[c].left),b=Math.max(b,this.boxes[c].right);return b-a},d.prototype.getHeight=function(){if(0===this.boxes.length)return 0;for(var a=this.boxes[0].top,b=this.boxes[0].bottom,c=1;c<this.boxes.length;c+=1)a=Math.min(a,this.boxes[c].top),b=Math.max(b,this.boxes[c].bottom);return b-a},d.prototype.getSize=function(){return new b(this.getWidth(),this.getHeight())},d.prototype.getPosition=function(){return new b(this.getBoundingBox())},d.prototype.getBoundingBox=function(){if(0===this.boxes.length)return 0;for(var a=this.boxes[0].left,b=this.boxes[0].top,d=this.boxes[0].right,e=this.boxes[0].bottom,f=1;f<this.boxes.length;f+=1)a=Math.min(a,this.boxes[f].left),b=Math.min(b,this.boxes[f].top),d=Math.max(d,this.boxes[f].right),e=Math.max(e,this.boxes[f].bottom);return new c(a,b,d,e)},d.prototype.getCollisionMesh=function(){return this},d.prototype.moveTo=function(a,c){var d=new b(a,c);return this.moveBy(d.subtract(this.getPosition())),this},d.prototype.moveBy=function(a,c){for(var d=new b(a||0,c||0),e=0;e<this.boxes.length;e+=1)this.boxes[e].moveBy(d);return this},d.prototype.isContains=function(a){if(!a)throw"isContains requires argument 'other'";a=a.constructor===Array?new d(a):a.getCollisionMesh();for(var b=0;b<this.boxes.length;b+=1)if(this.boxes[b].someContains(a.boxes))return!0;return!1},d.prototype.someContains=function(a){if(!a)throw"someContains requires argument 'other'";a=a.constructor===Array?new d(a):a.getCollisionMesh();for(var b=0;b<this.boxes.length;b+=1)if(this.boxes[b].someContains(a.boxes))return!0;return!1},d.prototype.isTouching=function(a){if(!a)throw"isTouching requires argument 'other'";a=a.constructor===Array?new d(a):a.getCollisionMesh();for(var b=0;b<this.boxes.length;b+=1)if(this.boxes[b].someTouching(a.boxes))return!0;return!1},d.prototype.someTouching=function(a){if(!a)throw"someTouching requires argument 'others'";if(a.constructor!==Array)throw"someTouching requires argument 'others' to resolve to type Array";for(var b=0;b<a.length;b+=1)if(this.isTouching(a[b]))return!0;return!1},d.prototype.isColliding=function(a){if(!a)throw"isColliding requires argument 'other'";a=a.constructor===Array?new d(a):a.getCollisionMesh();for(var b=0;b<this.boxes.length;b+=1)if(this.boxes[b].someColliding(a.boxes))return!0;return!1},d.prototype.someColliding=function(a){if(!a)throw"someColliding requires argument 'others'";if(a.constructor!==Array)throw"someColliding requires argument 'others' to resolve to type Array";for(var b=0;b<a.length;b+=1)for(var c=0;c<this.boxes.length;c+=1)if(this.boxes[c].isColliding(a[b]))return!0;return!1},d.prototype.getColliding=function(a){if(!a)throw"getColliding requires argument 'other'";a=a.constructor===Array?new d(a):a.getCollisionMesh();for(var b=0;b<this.boxes.length;b+=1){var c=this.boxes[b].getColliding(a.boxes);if(c)return c}},{Vector:b,Position:b,Size:b,BoundingBox:c,CollisionMesh:d}}(),function(){h._isRenderer&&!h._isBackend&&h.runtime.isBrowser&&!function(){var a=h.geometry,b=a.Vector,d=a.Position,e=a.Size,g=a.BoundingBox,i=(window,{width:600,height:600,frame:!1,resizable:!0,saveWindowState:!1,autoShow:!0,icon:location.href+"favicon.ico",url:".",minWidth:100,minHeight:100,maxWidth:1/0,maxHeight:1/0}),j={},k=["drag-start","drag-before","drag-stop","dock-before","move","move-before","resize-before","close","minimize"],l=["-ms-transform","-moz-transform","-o-transform","-webkit-transform","transform"],m=function n(a){if(!(this instanceof n))return new n(a);a=a||{};var b=!(a instanceof window.Window);if(c.call(this,k),this._ready=!1,this._isClosed=!1,this._isHidden=!1,this._isMinimized=!1,this._isMaximized=!1,this._dockedGroup=[this],this._children=[],this._parent=void 0,this._title=void 0,this._id=h.getUniqueWindowName(),b){for(var d in a)a.hasOwnProperty(d)&&void 0!==j[d]&&(a[j[d]]=a[d],delete a[d]);for(var e in i)i.hasOwnProperty(e)&&(a[e]=a[e]||i[e]);this._title=null==a.title?this._id:a.title,a.parent&&(a.parent._children.push(this),this._parent=a.parent,delete a.parent),this._minSize=new g(a.minWidth,a.minHeight),this._maxSize=new g(a.maxWidth,a.maxHeight);var f=h._launcher.document.createElement("iframe");f.src=a.url,f.style.position="absolute",Number.isFinite(a.left)||(a.left=(h._launcher.innerWidth-a.width)/2),f.style.left=a.left+"px",Number.isFinite(a.top)||(a.top=(h._launcher.innerHeight-a.height)/2),f.style.top=a.top+"px",f.style.width=a.width+"px",f.style.height=a.height+"px",f.style.minWidth=this._minSize.left+"px",f.style.minHeight=this._minSize.top+"px",f.style.maxWidth=this._maxSize.left+"px",f.style.maxHeight=this._maxSize.top+"px",f.style.margin=0,f.style.padding=0,f.style.border=0,f.style.resize="both",f.style.overflow="auto",h._launcher.document.body.appendChild(f),this._window=f,h._windows.push(this),this._ready=!0,this.emit("ready"),h._internalBus.emit("window-create",this),this.bringToFront(),this.focus()}else this._minSize=new g(i.minWidth,i.minHeight),this._maxSize=new g(i.maxWidth,i.maxHeight),this._window=a,h._windows.push(this),this._ready=!0};if(m.prototype=Object.create(c.prototype),m.prototype.constructor=m,m.getCurrent=function(){return m.current},m.prototype.isReady=function(){return this._ready},m.prototype.onReady=function(a){if(this.isClosed())throw"onReady can't be called on a closed window";return this.isReady()?a.call(this):void this.once("ready",a)},m.prototype.isClosed=function(){return this._isClosed},m.prototype.getPosition=function(){return new d(this._window.getBoundingClientRect())},m.prototype.getMinWidth=function(){return this._minSize.left},m.prototype.getWidth=function(){return this._window.getBoundingClientRect().width},m.prototype.getMaxWidth=function(){return this._maxSize.left},m.prototype.getMinHeight=function(){return this._minSize.top},m.prototype.getHeight=function(){return this._window.getBoundingClientRect().height},m.prototype.getMaxHeight=function(){return this._maxSize.top},m.prototype.getMinSize=function(){return this._minSize.clone()},m.prototype.getSize=function(){var a=this._window.getBoundingClientRect();return new e(a.width,a.height)},m.prototype.getMaxSize=function(){return this._maxSize.clone()},m.prototype.getBounds=function(){return new g(this._window.getBoundingClientRect())},m.prototype.getParent=function(){return this._parent},m.prototype.setParent=function(a){if(a!==this._parent){if(this._parent){var b=this._parent._children.indexOf(this);b>=0&&this._parent._children.splice(b,1)}a&&(this._parent=a,this._parent._children.push(this))}},m.prototype.getChildren=function(){return this._children.slice()},m.prototype.addChild=function(a){a.setParent(this)},m.prototype.getTitle=function(){return this._title},m.prototype.setTitle=function(a){if(!a)throw"setTitle requires one argument of type String";this._title=a},m.prototype.isHidden=function(){return this._isHidden},m.prototype.isShown=function(){return!this._isHidden},m.prototype.isMinimized=function(){return this._isMinimized},m.prototype.isRestored=function(){return this.isShown()&&!this.isMinimized()&&!this.isMaximized()},m.prototype.isMaximized=function(){return this._isMaximized},m.prototype.close=function(a){if(this.isClosed())return a&&a();this._window.parentElement.removeChild(this._window);var b=h._windows.indexOf(this);b>=0&&h._windows.splice(b,1),this.undock();for(var c=this.getParent(),d=this.getChildren(),e=Array.isArray(d),f=0,d=e?d:d[Symbol.iterator]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{if(f=d.next(),f.done)break;g=f.value}var i=g;i.setParent(c)}this.setParent(void 0),this._isClosed=!0,a&&a(),this.emit("close"),h._internalBus.emit("window-close",this)},m.prototype.minimize=function(a){if(!this._ready)throw"minimize can't be called on an unready window";for(var b=this._dockedGroup,c=Array.isArray(b),d=0,b=c?b:b[Symbol.iterator]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{if(d=b.next(),d.done)break;e=d.value}var f=e;f._isMinimized=!0,f.emit("minimize")}},m.prototype.maximize=function(a){if(!this._ready)throw"maximize can't be called on an unready window";this._restoreBounds=this.getBounds(),this._window.style.left=0,this._window.style.top=0,this._window.style.width="100%",this._window.style.height="100%",this._isMaximized=!0,a&&a()},m.prototype.show=function(a){if(!this._ready)throw"show can't be called on an unready window";for(var b=this._dockedGroup,c=Array.isArray(b),d=0,b=c?b:b[Symbol.iterator]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{if(d=b.next(),d.done)break;e=d.value}var f=e;f._window.style.display="",f._isHidden=!1}a&&a()},m.prototype.hide=function(a){if(!this._ready)throw"hide can't be called on an unready window";for(var b=this._dockedGroup,c=Array.isArray(b),d=0,b=c?b:b[Symbol.iterator]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{if(d=b.next(),d.done)break;e=d.value}var f=e;f._window.style.display="none",f._isHidden=!0}a&&a()},m.prototype.restore=function(a){if(!this._ready)throw"restore can't be called on an unready window";for(var b=this._dockedGroup,c=Array.isArray(b),d=0,b=c?b:b[Symbol.iterator]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{if(d=b.next(),d.done)break;e=d.value}var f=e;f._isMaximized&&(f._window.style.left=f._restoreBounds.left+"px",f._window.style.top=f._restoreBounds.top+"px",f._window.style.width=f._restoreBounds.getWidth()+"px",f._window.style.height=f._restoreBounds.getHeight()+"px",f._isHidden=!1,f._isMinimized=!1,f._isMaximized=!1)}a&&a()},m.prototype.bringToFront=function(a){if(!this._ready)throw"bringToFront can't be called on an unready window";for(var b=this._dockedGroup,c=Array.isArray(b),d=0,b=c?b:b[Symbol.iterator]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{if(d=b.next(),d.done)break;e=d.value}var f=e;f!==this&&(f._window.style["z-index"]=h._getNextZIndex())}this._window.style["z-index"]=h._getNextZIndex(),a&&a()},m.prototype.focus=function(a){if(!this._ready)throw"focus can't be called on an unready window";for(var b=this._dockedGroup,c=Array.isArray(b),d=0,b=c?b:b[Symbol.iterator]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{if(d=b.next(),d.done)break;e=d.value}var f=e;f!==this&&f._window.contentWindow.focus()}this._window.contentWindow.focus(),a&&a()},m.prototype.resizeTo=function(a,b,c){if(!this._ready)throw"resizeTo can't be called on an unready window";if(this.emit("resize-before")){var e=new d(a,b);this.undock(),this._window.width=e.left+"px",this._window.height=e.top+"px",c&&c()}},m.prototype.moveTo=function(a,b,c){if(!this._ready)throw"moveTo can't be called on an unready window";if(this.emit("move-before")){for(var e=new d(a,b).subtract(this.getPosition()),f=this._dockedGroup,g=Array.isArray(f),h=0,f=g?f:f[Symbol.iterator]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{if(h=f.next(),h.done)break;i=h.value}var j=i,k=j.getPosition().add(e);j._window.style.left=k.left+"px",j._window.style.top=k.top+"px"}c&&c()}},m.prototype.moveBy=function(a,b,c){if(!this._ready)throw"moveBy can't be called on an unready window";if(this.emit("move-before")){for(var e=new d(a,b),f=this._dockedGroup,g=Array.isArray(f),h=0,f=g?f:f[Symbol.iterator]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{if(h=f.next(),h.done)break;i=h.value}var j=i,k=j.getPosition().add(e);j._window.style.left=k.left+"px",j._window.style.top=k.top+"px"}c&&c();for(var l=this._dockedGroup,m=Array.isArray(l),n=0,l=m?l:l[Symbol.iterator]();;){var o;if(m){if(n>=l.length)break;o=l[n++]}else{if(n=l.next(),n.done)break;o=n.value}var p=o;p.emit("move")}}},m.prototype.setMinSize=function(a,b,c){if(!this._ready)throw"setMinSize can't be called on an unready window";var d=new e(a,b);this.undock(),this._minSize.left=d.left,this._minSize.top=d.top,this._window.style.minWidth=this._minSize.left+"px",this._window.style.minHeight=this._minSize.top+"px",this.getWidth()<d.left||this.getHeight()<d.top?(this._window.style.width=Math.max(this.getWidth(),d.left)+"px",this._window.style.height=Math.max(this.getHeight(),d.top)+"px",c&&c(),this.emit("resize")):c&&c()},m.prototype.setSize=function(a,b,c){if(!this._ready)throw"setMaxSize can't be called on an unready window";var d=new e(a,b);this.undock(),this._window.style.width=Math.min(this._maxSize.left,Math.max(this._minSize.left,d.left))+"px",this._window.style.height=Math.min(this._maxSize.top,Math.max(this._minSize.top,d.top))+"px";for(var f=l,g=Array.isArray(f),h=0,f=g?f:f[Symbol.iterator]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{if(h=f.next(),h.done)break;i=h.value}var j=i;this._window.style[j]=""}c&&c(),this.emit("resize")},m.prototype.forceScaledSize=function(a,b,c){if(!this._ready)throw"setMaxSize can't be called on an unready window";var d=new e(Math.min(this._maxSize.left,Math.max(this._minSize.left,a)),Math.min(this._maxSize.top,Math.max(this._minSize.top,b)));this.undock(),this._window.style.width=d.left+"px",this._window.style.height=d.top+"px";for(var f=Math.min(a/d.left,b/d.top),g=l,h=Array.isArray(g),i=0,g=h?g:g[Symbol.iterator]();;){var j;if(h){if(i>=g.length)break;j=g[i++]}else{if(i=g.next(),i.done)break;j=i.value}var k=j;this._window.style[k]="scale("+f+")"}c&&c(),this.emit("resize")},m.prototype.setMaxSize=function(a,b,c){if(!this._ready)throw"setMaxSize can't be called on an unready window";var d=new e(a,b);if(this.undock(),this._maxSize.left=d.left,this._maxSize.top=d.top,this._window.style.maxWidth=this._maxSize.left+"px",this._window.style.maxHeight=this._maxSize.top+"px",this.getWidth()>d.left||this.getHeight()>d.top){this._window.style.width=Math.min(this.getWidth(),d.left)+"px",this._window.style.height=Math.min(this.getHeight(),d.top)+"px";for(var f=l,g=Array.isArray(f),h=0,f=g?f:f[Symbol.iterator]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{if(h=f.next(),h.done)break;i=h.value}var j=i;this._window.style[j]=""}c&&c(),this.emit("resize")}else c&&c()},m.prototype.setBounds=function(a,b,c,d,e){if(!this._ready)throw"resizeTo can't be called on an unready window";var f=new g(a,b,c,d);this.undock(),this._window.style.left=f.left+"px",this._window.style.top=f.top+"px",this._window.style.width=Math.min(this._maxSize.left,Math.max(this._minSize.left,f.getWidth()))+"px",
this._window.style.height=Math.min(this._maxSize.top,Math.max(this._minSize.top,f.getHeight()))+"px";for(var h=l,i=Array.isArray(h),j=0,h=i?h:h[Symbol.iterator]();;){var k;if(i){if(j>=h.length)break;k=h[j++]}else{if(j=h.next(),j.done)break;k=j.value}var m=k;this._window.style[m]=""}e&&e()},m.prototype.dock=function(a){if(this.emit("dock-before")&&void 0!==a&&!(this._dockedGroup.indexOf(a)>=0))for(var b=a._dockedGroup,c=Array.isArray(b),d=0,b=c?b:b[Symbol.iterator]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{if(d=b.next(),d.done)break;e=d.value}var f=e;this._dockedGroup.push(f),f._dockedGroup=this._dockedGroup}},m.prototype.undock=function(a){1!==this._dockedGroup.length&&(this._dockedGroup.splice(this._dockedGroup.indexOf(this),1),this._dockedGroup=[this])},m.prototype._dragStart=function(){if(this.emit("drag-start")){this.restore();for(var a=this._dockedGroup,b=Array.isArray(a),c=0,a=b?a:a[Symbol.iterator]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{if(c=a.next(),c.done)break;d=c.value}var e=d;e._dragStartPos=e.getPosition()}}},m.prototype._dragBy=function(a,c){if(this.emit("drag-before")){for(var d=this.getBounds().moveTo(this._dragStartPos.left+a,this._dragStartPos.top+c),e=new b(NaN,NaN),f=h._windows,g=Array.isArray(f),i=0,f=g?f:f[Symbol.iterator]();;){var j;if(g){if(i>=f.length)break;j=f[i++]}else{if(i=f.next(),i.done)break;j=i.value}var k=j;k._dockedGroup!==this._dockedGroup&&e.setMin(d.getSnapDelta(k.getBounds()))}a+=e.left||0,c+=e.top||0;for(var l=this._dockedGroup,m=Array.isArray(l),n=0,l=m?l:l[Symbol.iterator]();;){var o;if(m){if(n>=l.length)break;o=l[n++]}else{if(n=l.next(),n.done)break;o=n.value}var p=o,q=p._dragStartPos;void 0===q&&(q=p._dragStartPos=p.getPosition(),q.left-=a,q.top-=c),p._window.style.left=q.left+a+"px",p._window.style.top=q.top+c+"px",p.emit("move")}}},m.prototype._dragStop=function(){for(var a=this.getBounds(),b=h._windows,c=Array.isArray(b),d=0,b=c?b:b[Symbol.iterator]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{if(d=b.next(),d.done)break;e=d.value}var f=e;a.isTouching(f.getBounds())&&this.dock(f)}for(var g=this._dockedGroup,i=Array.isArray(g),j=0,g=i?g:g[Symbol.iterator]();;){var k;if(i){if(j>=g.length)break;k=g[j++]}else{if(j=g.next(),j.done)break;k=j.value}var l=k;delete l._dragStartPos}this.emit("drag-stop")},m.current=function(){for(var a=h._windows,b=Array.isArray(a),c=0,a=b?a:a[Symbol.iterator]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{if(c=a.next(),c.done)break;d=c.value}var e=d;if(e._window.contentWindow===window)return e}}(),m.getAll=function(){return h._windows.slice()},h.isLauncher){new m(window)}f(h,{Window:m})}()}(),function(){function a(a){if(!(a&&a.constructor&&a.call&&a.apply))throw"onReady expects a function passed as the callback argument!";d&&a(),c.indexOf(a)>=0||c.push(a)}if(h._isRenderer&&!h._isBackend&&h.runtime.isBrowser){var b=h.Window,c=[],d=!0;h.isLauncher||!function(){var a=0,c=0,d=!1;window.addEventListener("focus",function(){b.current.bringToFront()}),window.addEventListener("mousedown",function(e){e.target.classList&&e.target.classList.contains("window-drag")&&(d=!0,a=e.screenX,c=e.screenY,b.current._dragStart())}),window.addEventListener("mousemove",function(e){d&&b.current._dragBy(e.screenX-a,e.screenY-c)}),window.addEventListener("mouseup",function(){d=!1,b.current._dragStop()})}();var e=function(){function a(a){return function(b){var c=null;b=JSON.parse(b);a.apply(c,b.data)}}var c={},d={};return window.addEventListener("message",function(a){var b=void 0;try{b=JSON.parse(a.data)}catch(c){return void console.error("Unable to parse message:",a.data)}if(null!=d[b.event])for(var e=d[b.event],f=Array.isArray(e),g=0,e=f?e:e[Symbol.iterator]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{if(g=e.next(),g.done)break;h=g.value}var i=h;i.apply(null,b.args)}},!1),{send:function(a){for(var c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];if(d.length>0&&d[0]instanceof b){var f=d.unshift(),g={id:0,event:a,data:d};f._window.contentWindow.postMessage(g,"*")}else for(var i={event:a,data:d},j=h._windows,k=Array.isArray(j),l=0,j=k?j:j[Symbol.iterator]();;){var m;if(k){if(l>=j.length)break;m=j[l++]}else{if(l=j.next(),l.done)break;m=l.value}var n=m;n._window.contentWindow.postMessage(i,"*")}},on:function(b,e,f){void 0===f&&(f=e,e=void 0);a(f);if(void 0!==e){var g=d[e.name]=d[e.name]||{};g[b]=g[b]||new Set,g[b].add(f)}else c[b]=c[b]||new Set,c[b].add(f)},off:function(a,b,e){if(void 0===e&&(e=b,b=void 0),void 0!==b){var f=d[b.name]=d[b.name]||{};f[a]=f[a]||new Set,f[a]["delete"](e)}else c[a]=c[a]||new Set,c[a]["delete"](e)}}}();f(h,{onReady:a,isReady:function(){return d},messagebus:e})}}(),function(){h.runtime.isElectron&&(h._isRenderer?!function(){var a=h.geometry,b=(a.Vector,a.Position),d=(a.Size,a.BoundingBox),e=nodeRequire("electron").remote,g=(nodeRequire("path"),nodeRequire("url")),i=e.BrowserWindow,j=e.getCurrentWindow(),k={width:600,height:600,frame:!1,resizable:!0,hasShadow:!1,icon:"favicon.ico",webPreferences:{nodeIntegration:!1,preload:nodeRequire.windowfactoryPath}},l={left:"x",top:"y"},m=["drag-start","drag-before","drag-stop","dock-before","move","move-before","resize-before","close","minimize"],n={},o=function p(a){function b(){t.emit("move")}function d(){t.emit("minimize")}function f(){t._isClosed=!0,t.emit("close"),t._window=void 0}if(!(this instanceof p))return new p(a);a=a||{};var o=void 0===a.webContents;if(c.call(this,m),this._id=h.getUniqueWindowName(),o){for(var q in a)a.hasOwnProperty(q)&&void 0!==l[q]&&(a[l[q]]=a[q],delete a[q]);for(var r in k)k.hasOwnProperty(r)&&(a[r]=a[r]||k[r]);a.title=null==a.title?this._id:a.title;var s=a.url;delete a.url,this._window=new i(a),/^(file|http)/i.test(s)||("/"!==s[0]?s=g.resolve(location.href,s):/^http/i.test(location.href)?s=location.origin+s:/^file/i.test(location.href)&&(s=e.getGlobal("workingDir")+s)),this._window.loadURL(s),this._window.setTitle(a.title)}else this._window=a;n[this._window.id]=this,this._window._ensureDockSystem();var t=this;this._window.on("move",b),this._window.on("minimize",b),this._isClosed=!1,this._isHidden=!1,this._isMinimized=!1,this._isMaximized=!1,this._window.on("close",f),j.on("close",function(){delete n[this._window.id],t.off("move",b),t.off("close",f),t.off("minimize",d)}),this._ready=!0,o&&this._window._notifyReady()};o.prototype=Object.create(c.prototype),o.prototype.constructor=o,o.getCurrent=function(){return o.current},o.prototype.onReady=function(a){if(this.isClosed())throw"onReady can't be called on a closed window";return this.isReady()?a.call(this):void this.once("ready",a)},o.prototype.isReady=function(){return void 0!==this._window},o.prototype.isClosed=function(){return this._isClosed},o.prototype.getPosition=function(){var a=this._window.getPosition();return new b(a[0],a[1])},o.prototype.getWidth=function(){var a=this._window.getSize();return a[0]},o.prototype.getHeight=function(){var a=this._window.getSize();return a[1]},o.prototype.getSize=function(){var a=this._window.getSize();return new b(a[0],a[1])},o.prototype.getBounds=function(){var a=this._window.getBounds();return new d(a.x,a.y,a.x+a.width,a.y+a.height)},o.prototype.getTitle=function(){return this._title},o.prototype.setTitle=function(a){if(!a)throw"setTitle requires one argument of type String";this._window.setTitle(a)},o.prototype.isHidden=function(){return this._isHidden},o.prototype.isShown=function(){return!this._isHidden},o.prototype.isMinimized=function(){return this._isMinimized},o.prototype.isRestored=function(){return this.isShown()&&!this.isMinimized()&&!this.isMaximized()},o.prototype.isMaximized=function(){return this._isMaximized},o.prototype.close=function(a){return this.isClosed()?a&&a():(this._window.close(),void(a&&a()))},o.prototype.minimize=function(a){if(!this._ready)throw"minimize can't be called on an unready window";this._window._dockMinimize(),a&&a()},o.prototype.maximize=function(a){if(!this._ready)throw"maximize can't be called on an unready window";this._window.maximize(),a&&a()},o.prototype.show=function(a){if(!this._ready)throw"show can't be called on an unready window";this._window._dockShow(),a&&a()},o.prototype.hide=function(a){if(!this._ready)throw"hide can't be called on an unready window";this._window._dockHide(),a&&a()},o.prototype.restore=function(a){if(!this._ready)throw"restore can't be called on an unready window";this._window.restore(),a&&a()},o.prototype.bringToFront=function(a){if(!this._ready)throw"bringToFront can't be called on an unready window";this._window.setAlwaysOnTop(!0),this._window.setAlwaysOnTop(!1),a&&a()},o.prototype.focus=function(a){if(!this._ready)throw"focus can't be called on an unready window";this._window.focus(),a&&a()},o.prototype.resizeTo=function(a,c,d){if(!this._ready)throw"resizeTo can't be called on an unready window";var e=new b(a,c);this._window.setSize(e.left,e.top),d&&d()},o.prototype.moveTo=function(a,c,d){if(!this._ready)throw"moveTo can't be called on an unready window";new b(a,c);this._window._dockMoveTo(a,c),d&&d()},o.prototype.moveBy=function(a,c,d){if(!this._ready)throw"moveBy can't be called on an unready window";var e=this.getBounds(),f=new b(a,c);this._window._dockMoveTo(e.left+f.left,e.top+f.top),d&&d()},o.prototype.setBounds=function(a,b,c,e,f){if(!this._ready)throw"resizeTo can't be called on an unready window";new d(a,b,c,e);this._window.setSize({x:a,y:b,width:c-a,height:e-b}),f&&f()},o.prototype.dock=function(a){this._window.dock(a._window.id)},o.prototype.undock=function(){this._window.undock()},o.current=new o(j),o.getAll=function(){},f(h,{Window:o,_resolveWindowWithID:function(a){return n[a]||new o(i.fromId(a))}})}():h._isBackend&&!function(){var a=global.nodeRequire("electron"),b=a.BrowserWindow;a.ipcMain;b&&!function(){var a=h.geometry,c=a.Vector,d=a.BoundingBox;b.prototype._notifyReady=function(){for(var a=b.getAllWindows(),c=Array.isArray(a),d=0,a=c?a:a[Symbol.iterator]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{if(d=a.next(),d.done)break;e=d.value}var f=e;f.webContents.send("window-create",f.id)}},b.prototype._ensureDockSystem=function(){var a=this;void 0===this._dockedGroup&&!function(){a._dockedGroup=[a],a.on("closed",function(){this.undock()}),a.on("maximize",function(){this.undock()}),a.on("minimize",function(){this._dockMinimize()}),a.on("restore",function(){for(var a=this._dockedGroup,b=Array.isArray(a),c=0,a=b?a:a[Symbol.iterator]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{if(c=a.next(),c.done)break;d=c.value}var e=d;e!==this&&e.restore()}});var b=a.getBounds();a.on("move",function(){var a=this.getBounds();b=a}),a.on("resize",function(){var a=this.getBounds();a.width===b.width&&a.height===b.height||this.undock(),b=a})}()},b.prototype.dock=function(a){this._ensureDockSystem();var c=b.fromId(a);if(void 0!==c&&!(this._dockedGroup.indexOf(c)>=0)){c._ensureDockSystem();for(var d=c._dockedGroup,e=Array.isArray(d),f=0,d=e?d:d[Symbol.iterator]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{if(f=d.next(),f.done)break;g=f.value}var h=g;this._dockedGroup.push(h),h._dockedGroup=this._dockedGroup}}},b.prototype.undock=function(){this._ensureDockSystem(),1!==this._dockedGroup.length&&(this._dockedGroup.splice(this._dockedGroup.indexOf(this),1),this._dockedGroup=[this])},b.prototype._dockFocus=function(){this._ensureDockSystem();for(var a=this._dockedGroup,b=Array.isArray(a),c=0,a=b?a:a[Symbol.iterator]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{if(c=a.next(),c.done)break;d=c.value}var e=d;e!==this&&(e.setAlwaysOnTop(!0),e.setAlwaysOnTop(!1))}this.setAlwaysOnTop(!0),this.setAlwaysOnTop(!1)},b.prototype._dragStart=function(){this._ensureDockSystem(),this.restore();for(var a=this._dockedGroup,b=Array.isArray(a),c=0,a=b?a:a[Symbol.iterator]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{if(c=a.next(),c.done)break;d=c.value}var e=d;e._dragStartPos=e.getPosition()}},b.prototype._getBounds=function(){var a=this.getBounds();return new d(a.x,a.y,a.x+a.width,a.y+a.height)},b.prototype._dragBy=function(a,d){this._ensureDockSystem();for(var e=this._getBounds().moveTo(this._dragStartPos[0]+a,this._dragStartPos[1]+d),f=new c(NaN,NaN),g=b.getAllWindows(),h=Array.isArray(g),i=0,g=h?g:g[Symbol.iterator]();;){var j;if(h){if(i>=g.length)break;j=g[i++]}else{if(i=g.next(),i.done)break;j=i.value}var k=j;k._dockedGroup!==this._dockedGroup&&f.setMin(e.getSnapDelta(k._getBounds()))}a+=f.left||0,d+=f.top||0;for(var l=this._dockedGroup,m=Array.isArray(l),n=0,l=m?l:l[Symbol.iterator]();;){var o;if(m){if(n>=l.length)break;o=l[n++]}else{if(n=l.next(),n.done)break;o=n.value}var p=o,q=p._dragStartPos;void 0===q&&(q=p._dragStartPos=p.getPosition(),q[0]-=a,q[1]-=d),p.setPosition(q[0]+a,q[1]+d)}},b.prototype._dragStop=function(){this._ensureDockSystem();for(var a=this._getBounds(),c=b.getAllWindows(),d=Array.isArray(c),e=0,c=d?c:c[Symbol.iterator]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{if(e=c.next(),e.done)break;f=e.value}var g=f;a.isTouching(g._getBounds())&&this.dock(g.id)}for(var h=this._dockedGroup,i=Array.isArray(h),j=0,h=i?h:h[Symbol.iterator]();;){var k;if(i){if(j>=h.length)break;k=h[j++]}else{if(j=h.next(),j.done)break;k=j.value}var l=k;delete l._dragStartPos}},b.prototype._dockMoveTo=function(a,b){this._ensureDockSystem();for(var c=this.getPosition(),d=a-c[0],e=b-c[1],f=this._dockedGroup,g=Array.isArray(f),h=0,f=g?f:f[Symbol.iterator]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{if(h=f.next(),h.done)break;i=h.value}var j=i,k=j.getPosition();j.setPosition(k[0]+d,k[1]+e)}},b.prototype._dockMinimize=function(a,b){this._ensureDockSystem();for(var c=this._dockedGroup,d=Array.isArray(c),e=0,c=d?c:c[Symbol.iterator]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{if(e=c.next(),e.done)break;f=e.value}var g=f;g.minimize()}},b.prototype._dockHide=function(a,b){this._ensureDockSystem();for(var c=this._dockedGroup,d=Array.isArray(c),e=0,c=d?c:c[Symbol.iterator]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{if(e=c.next(),e.done)break;f=e.value}var g=f;g.hide()}},b.prototype._dockShow=function(a,b){this._ensureDockSystem();for(var c=this._dockedGroup,d=Array.isArray(c),e=0,c=d?c:c[Symbol.iterator]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{if(e=c.next(),e.done)break;f=e.value}var g=f;g.show()}}}()}())}(),function(){function a(a){if(!(a&&a.constructor&&a.call&&a.apply))throw"onReady expects a function passed as the callback argument!";g&&a(),e.indexOf(a)>=0||e.push(a)}if(h._isRenderer&&!h._isBackend&&h.runtime.isElectron){var b=h.Window,c=nodeRequire("electron"),d=c.remote,e=(c.ipcRenderer,[]),g=!0,i=0,j=0,k=!1;b.current._window.on("focus",function(){b.current._window._dockFocus()}),window.addEventListener("mousedown",function(a){a.target.classList&&a.target.classList.contains("window-drag")&&(k=!0,i=a.screenX,j=a.screenY,b.current._window._dragStart())}),window.addEventListener("mousemove",function(a){k&&b.current._window._dragBy(a.screenX-i,a.screenY-j)}),window.addEventListener("mouseup",function(){k=!1,b.current._window._dragStop()});var l=d.Menu,m=d.MenuItem,n=null,o=new l;o.append(new m({label:"Reload",accelerator:"CmdOrCtrl+R",click:function(){b.current._window.reload()}})),o.append(new m({label:"Reload app and restart children",click:function(){d.app.relaunch(),d.app.exit(0)}})),o.append(new m({type:"separator"})),o.append(new m({label:"Inspect Element",accelerator:"CmdOrCtrl+Shift+I",click:function(){b.current._window.inspectElement(n.x,n.y)}})),window.addEventListener("contextmenu",function(a){a.preventDefault(),n={x:a.x,y:a.y},o.popup(b.current._window)},!1);var p=function(){return{send:function(){},on:function(){},off:function(){}}}();f(h,{onReady:a,isReady:function(){return g},messagebus:p})}}(),function(){h._isRenderer&&!h._isBackend&&h.runtime.isOpenFin&&!function(){var a=h.geometry,b=a.Vector,d=a.Position,g=a.Size,i=a.BoundingBox,j=void 0,k={defaultWidth:600,defaultHeight:600,frame:!1,resizable:!0,saveWindowState:!1,autoShow:!0,icon:location.href+"favicon.ico"},l={title:"name",left:"defaultLeft",top:"defaultTop",width:"defaultWidth",height:"defaultHeight"},m=["ready","drag-start","drag-before","drag-stop","dock-before","move","move-before","resize-before","close","minimize"],n=function o(a){if(!(this instanceof o))return new o(a);a=a||{};var b=void 0===a.app_uuid;if(c.call(this,m),this._bounds=new i,this._ready=!1,this._isClosed=!1,this._isHidden=!1,this._isMinimized=!1,this._isMaximized=!1,this._dockedGroup=[this],this._children=[],this._parent=void 0,this._title=void 0,this._id=h.getUniqueWindowName(),b){for(var d in a)a.hasOwnProperty(d)&&void 0!==l[d]&&(a[l[d]]=a[d],delete a[d]);for(var e in k)k.hasOwnProperty(e)&&(a[e]=a[e]||k[e]);this._title=null==a.title?this._id:a.title,a.name=this._id,a.parent&&(a.parent._children.push(this),this._parent=a.parent,delete a.parent),h._windows[a.name]=this,this._window=new fin.desktop.Window(a,this._setupDOM.bind(this),function(b){console.error(b,a)})}else this._window=a,h._windows[this._window.name]=this,this._setupDOM()};n.prototype=Object.create(c.prototype),n.prototype.constructor=n,n.prototype._setupDOM=function(){function a(){e._window.contentWindow.windowfactory?(e._window.contentWindow.windowfactory._windows=h._windows,e._window.contentWindow.windowfactory._internalBus=h._internalBus):setTimeout(a,5)}function b(a){e._bounds.set(a.left,a.top,a.left+a.width,a.top+a.height),0!==a.changeType&&e.undock(),1!==a.changeType&&e.emit("move")}function c(){e._isClosed=!0,delete h._windows[e._window.name],e.undock();for(var a=e.getParent(),b=e.getChildren(),c=Array.isArray(b),d=0,b=c?b:b[Symbol.iterator]();;){var f;if(c){if(d>=b.length)break;f=b[d++]}else{if(d=b.next(),d.done)break;f=d.value}var g=f;g.setParent(a)}e.setParent(void 0),e.emit("close"),h._internalBus.emit("window-close",e),e._window=void 0}function d(){e.emit("minimize")}var e=this;a(),this._window.getBounds(function(a){e._bounds.set(a.left,a.top,a.left+a.width,a.top+a.height)}),this._window.addEventListener("bounds-changing",b),this._window.addEventListener("bounds-changed",b),this._window.addEventListener("closed",c),this._window.addEventListener("minimized",d),this._titleEl=this._window.document.createElement("title"),this._titleEl.innerText=this._title,this._window.document.head.appendChild(this._titleEl),this._ready=!0,this.emit("ready"),h._internalBus.emit("window-create",this)},n.getCurrent=function(){return n.current},n.prototype.isReady=function(){return this._ready},n.prototype.onReady=function(a){if(this.isClosed())throw"onReady can't be called on a closed window";return this.isReady()?a.call(this):void this.once("ready",a)},n.prototype.isClosed=function(){return this._isClosed},n.prototype.getPosition=function(){return this._bounds.getPosition()},n.prototype.getWidth=function(){return this._bounds.getWidth()},n.prototype.getHeight=function(){return this._bounds.getHeight()},n.prototype.getSize=function(){return this._bounds.getSize()},n.prototype.getBounds=function(){return this._bounds.clone()},n.prototype.getParent=function(){return this._parent},n.prototype.setParent=function(a){if(a!==this._parent){if(this._parent){var b=this._parent._children.indexOf(this);b>=0&&this._parent._children.splice(b,1)}a&&(this._parent=a,this._parent._children.push(this))}},n.prototype.getChildren=function(){return this._children.slice()},n.prototype.addChild=function(a){a.setParent(this)},n.prototype.getTitle=function(){return this._title},n.prototype.setTitle=function(a){if(!a)throw"setTitle requires one argument of type String";this._titleEl.innerText=this._title=a},n.prototype.isHidden=function(){return this._isHidden},n.prototype.isShown=function(){return!this._isHidden},n.prototype.isMinimized=function(){return this._isMinimized},n.prototype.isRestored=function(){return this.isShown()&&!this.isMinimized()&&!this.isMaximized()},n.prototype.isMaximized=function(){return this._isMaximized},n.prototype.close=function(a){return this.isClosed()?a&&a():void this._window.close(a)},n.prototype.minimize=function(a){if(!this._ready)throw"minimize can't be called on an unready window";a=new e(a);for(var b=this._dockedGroup,c=Array.isArray(b),d=0,b=c?b:b[Symbol.iterator]();;){var f;if(c){if(d>=b.length)break;f=b[d++]}else{if(d=b.next(),d.done)break;f=d.value}var g=f;g._isMinimized=!0,g._window.minimize(a.ref())}},n.prototype.maximize=function(a){if(!this._ready)throw"maximize can't be called on an unready window";this._isMaximized=!0,this._window.maximize(a)},n.prototype.show=function(a){if(!this._ready)throw"show can't be called on an unready window";a=new e(a);for(var b=this._dockedGroup,c=Array.isArray(b),d=0,b=c?b:b[Symbol.iterator]();;){var f;if(c){if(d>=b.length)break;f=b[d++]}else{if(d=b.next(),d.done)break;f=d.value}var g=f;g._isHidden=!1,g._window.show(a.ref())}},n.prototype.hide=function(a){if(!this._ready)throw"hide can't be called on an unready window";a=new e(a);for(var b=this._dockedGroup,c=Array.isArray(b),d=0,b=c?b:b[Symbol.iterator]();;){var f;if(c){if(d>=b.length)break;f=b[d++]}else{if(d=b.next(),d.done)break;f=d.value}var g=f;g._isHidden=!0,g._window.hide(a.ref())}},n.prototype.restore=function(a){if(!this._ready)throw"restore can't be called on an unready window";a=new e(a);for(var b=this._dockedGroup,c=Array.isArray(b),d=0,b=c?b:b[Symbol.iterator]();;){var f;if(c){if(d>=b.length)break;f=b[d++]}else{if(d=b.next(),d.done)break;f=d.value}var g=f;g._isHidden=!1,g._isMinimized=!1,g._isMaximized=!1,g._window.restore(a.ref())}},n.prototype.bringToFront=function(a){if(!this._ready)throw"bringToFront can't be called on an unready window";for(var b=this,c=new e(function(){b._window.bringToFront(a)}),d=this._dockedGroup,f=Array.isArray(d),g=0,d=f?d:d[Symbol.iterator]();;){var h;if(f){if(g>=d.length)break;h=d[g++]}else{if(g=d.next(),g.done)break;h=g.value}var i=h;i!==this&&i._window.bringToFront(c.ref())}},n.prototype.focus=function(a){if(!this._ready)throw"focus can't be called on an unready window";for(var b=this,c=new e(function(){b._window.focus(a)}),d=this._dockedGroup,f=Array.isArray(d),g=0,d=f?d:d[Symbol.iterator]();;){var h;if(f){if(g>=d.length)break;h=d[g++]}else{if(g=d.next(),g.done)break;h=g.value}var i=h;i!==this&&i._window.focus(c.ref())}},n.prototype.resizeTo=function(a,b,c){if(!this._ready)throw"resizeTo can't be called on an unready window";if(this.emit("resize-before")){var e=new d(a,b);this._window.resizeTo(e.left,e.top,"top-left",c)}},n.prototype.moveTo=function(a,b,c){if(!this._ready)throw"moveTo can't be called on an unready window";if(this.emit("move-before")){var f=new d(a,b).subtract(this.getPosition());c=new e(c);for(var g=this._dockedGroup,h=Array.isArray(g),i=0,g=h?g:g[Symbol.iterator]();;){var j;if(h){if(i>=g.length)break;j=g[i++]}else{if(i=g.next(),i.done)break;j=i.value}var k=j,l=k.getPosition().add(f);k._bounds.moveTo(l),k._window.moveTo(l.left,l.top,c.ref())}}},n.prototype.moveBy=function(a,b,c){if(!this._ready)throw"moveBy can't be called on an unready window";if(this.emit("move-before")){var f=new d(a,b);c=new e(c);for(var g=this._dockedGroup,h=Array.isArray(g),i=0,g=h?g:g[Symbol.iterator]();;){var j;if(h){if(i>=g.length)break;j=g[i++]}else{if(i=g.next(),i.done)break;j=i.value}var k=j,l=k.getPosition().add(f);k._bounds.moveTo(l),k._window.moveTo(l.left,l.top,c.ref())}}},n.prototype.setSize=function(a,b,c){if(!this._ready)throw"setSize can't be called on an unready window";var d=new g(a,b);this._window.resizeTo(d.left,d.top,"top-left",c)},n.prototype.setBounds=function(a,b,c,d,e){if(!this._ready)throw"resizeTo can't be called on an unready window";var f=new i(a,b,c,d);this._window.setBounds(f.left,f.top,f.right,f.bottom,e)},n.prototype.dock=function(a){if(this.emit("dock-before")&&void 0!==a&&!(this._dockedGroup.indexOf(a)>=0))for(var b=a._dockedGroup,c=Array.isArray(b),d=0,b=c?b:b[Symbol.iterator]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{if(d=b.next(),d.done)break;e=d.value}var f=e;this._dockedGroup.push(f),f._dockedGroup=this._dockedGroup}},n.prototype.undock=function(a){1!==this._dockedGroup.length&&(this._dockedGroup.splice(this._dockedGroup.indexOf(this),1),this._dockedGroup=[this])},n.prototype._dragStart=function(){if(this.emit("drag-start"))for(var a=this._dockedGroup,b=Array.isArray(a),c=0,a=b?a:a[Symbol.iterator]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{if(c=a.next(),c.done)break;d=c.value}var e=d;e._dragStartPos=e.getPosition()}},n.prototype._dragBy=function(a,c){if(this.emit("drag-before")){var d=this.getBounds().moveTo(this._dragStartPos.left+a,this._dragStartPos.top+c),e=new b(NaN,NaN);for(var f in h._windows)if(h._windows.hasOwnProperty(f)){var g=h._windows[f];g._dockedGroup!==this._dockedGroup&&e.setMin(d.getSnapDelta(g.getBounds()))}a+=e.left||0,c+=e.top||0;for(var i=this._dockedGroup,j=Array.isArray(i),k=0,i=j?i:i[Symbol.iterator]();;){var l;if(j){if(k>=i.length)break;l=i[k++]}else{if(k=i.next(),k.done)break;l=k.value}var m=l,n=m._dragStartPos;void 0===n&&(n=m._dragStartPos=m.getPosition(),n.left-=a,n.top-=c),m._window.moveTo(n.left+a,n.top+c)}}},n.prototype._dragStop=function(){var a=this.getBounds();for(var b in h._windows)if(h._windows.hasOwnProperty(b)){var c=h._windows[b];a.isTouching(c.getBounds())&&this.dock(c)}for(var d=this._dockedGroup,e=Array.isArray(d),f=0,d=e?d:d[Symbol.iterator]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{if(f=d.next(),f.done)break;g=f.value}var i=g;delete i._dragStartPos}this.emit("drag-stop")},fin.desktop.main(function(){j=fin.desktop.Window.getCurrent();var a=function b(){h._windows?n.current=h._windows[j.name]||new n(j):setTimeout(b,5)};a()}),n.getAll=function(){return Object.keys(h._windows).map(function(a){return h._windows[a]})},f(h,{Window:n})}()}(),function(){function a(a){if(!(a&&a.constructor&&a.call&&a.apply))throw"onReady expects a function passed as the callback argument!";g&&a(),e.indexOf(a)>=0||e.push(a)}function b(){c.current._window.addEventListener("focused",function(){c.current.bringToFront()}),c.current._window.addEventListener("restored",function(){for(var a=c.current._dockedGroup,b=Array.isArray(a),d=0,a=b?a:a[Symbol.iterator]();;){var e;if(b){if(d>=a.length)break;e=a[d++]}else{if(d=a.next(),d.done)break;e=d.value}var f=e;f!==c.current&&f._window.restore()}}),g=!0;for(var a=0;a<e.length;a+=1)e[a]();e=[]}if(h._isRenderer&&!h._isBackend&&h.runtime.isOpenFin){var c=h.Window,d="app_uuid",e=[],g=!1;h._openfinOnReady(function(){var a=0,d=0,e=!1;window.addEventListener("mousedown",function(b){b.target.classList&&b.target.classList.contains("window-drag")&&(e=!0,a=b.screenX,d=b.screenY,c.current._dragStart())}),window.addEventListener("mousemove",function(b){e&&c.current._dragBy(b.screenX-a,b.screenY-d)}),window.addEventListener("mouseup",function(){e=!1,c.current._dragStop()});var f=setInterval(function(){c.current&&void 0!==h.runtime.version&&(clearInterval(f),b())},5)});var i=function(){function a(a){return function(b){try{b=JSON.parse(b)}catch(c){return void console.error("Unable to parse message:",b)}var d=null;a.apply(d,b)}}var b=new Map,e=new Map;return{send:function(a){for(var b=arguments.length,e=Array(b>1?b-1:0),f=1;f<b;f++)e[f-1]=arguments[f];if(e.length>0&&e[0]instanceof c){var g=e.unshift();fin.desktop.InterApplicationBus.send(c.current._window[d],g._window.name,a,JSON.stringify(e))}else fin.desktop.InterApplicationBus.send(c.current._window[d],a,JSON.stringify(e))},on:function(f,g,h){void 0===h&&(h=g,g=void 0);var i=a(h);void 0!==g?(e[g._window.name].add(h,i),fin.desktop.InterApplicationBus.subscribe(c.current._window[d],g._window.name,f,i)):(b.add(h,i),fin.desktop.InterApplicationBus.subscribe(c.current._window[d],f,i))},off:function(a,f,g){void 0===g&&(g=f,f=void 0),void 0!==f?fin.desktop.InterApplicationBus.unsubscribe(c.current._window[d],f._window.name,a,e[f._window.name].get(g)):fin.desktop.InterApplicationBus.unsubscribe(c.current._window[d],a,b.get(g))}}}();f(h,{onReady:a,isReady:function(){return g},messagebus:i})}}(),a["default"]=h});